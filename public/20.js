(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{58:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n);function s(t,e,r,n,a,s,c){try{var i=t[s](c),o=i.value}catch(t){return void r(t)}i.done?e(o):Promise.resolve(o).then(n,a)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var c=t.apply(e,r);function i(t){s(c,n,a,i,o,"next",t)}function o(t){s(c,n,a,i,o,"throw",t)}i(void 0)}))}}var i={props:["propNtpfc"],data:function(){return{dialog:!1,ref:"",amount:0,status:"",ntpfc:{},sumAll:{}}},methods:{clickCheckSlip:function(){var t=this;this.amount>this.sumAll.sumBalance?this.$swal({title:"โปรดอ่าน",icon:"warning",text:"ยอดชำระเงิน มากกว่า ยอดคงเหลือ",allowOutsideClick:!1,denyButtonText:"ไม่ถูกต้อง",confirmButtonText:"ถูกต้อง",showDenyButton:!0}).then((function(e){if(e.isConfirmed)t.checkSlip();else if(e.isDenied)return})):this.checkSlip()},checkSlip:function(){var t=this;return c(a.a.mark((function e(){var r,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$loading.show(),n={ntpfc:t.ntpfc,ref:t.ref,amount:t.amount},e.next=4,t.$store.dispatch("orderNoticeOfPaymentFromCustomer/postCheckSlip",n);case 4:200===(s=e.sent).status?t.$swal({title:s.data.title,text:s.data.text,icon:s.data.status,allowOutsideClick:!1,confirmButtonText:"รับทราบ"}).then((function(e){e.isConfirmed&&(t.$emit("emitStart"),t.dialog=!1)})):t.$swal({title:"Error 500",icon:"error",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),r.hide();case 7:case"end":return e.stop()}}),e)})))()},clickAppealSlip:function(){var t=this;return c(a.a.mark((function e(){var r,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$loading.show(),n={ntpfc:t.ntpfc},e.next=4,t.$store.dispatch("orderNoticeOfPaymentFromCustomer/postAppealSlip",n);case 4:200===(s=e.sent).status?t.$swal({title:s.data.title,text:s.data.text,icon:s.data.status,allowOutsideClick:!1,confirmButtonText:"รับทราบ"}).then((function(e){e.isConfirmed&&(t.$emit("emitStart"),t.dialog=!1)})):t.$swal({title:"Error 500",icon:"error",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),r.hide();case 7:case"end":return e.stop()}}),e)})))()},clickUpdateSlip:function(){var t=this;return c(a.a.mark((function e(){var r,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.amount>t.sumAll.sumBalance+t.ntpfc.amount)){e.next=3;break}return t.$toast.warning("ยอดชำระเงิน มากกว่า ยอดคงเหลือ"),e.abrupt("return");case 3:return r=t.$loading.show(),n={ntpfc:t.ntpfc,amount:t.amount},e.next=7,t.$store.dispatch("orderNoticeOfPaymentFromCustomer/postUpdateSlip",n);case 7:200===(s=e.sent).status?t.$swal({title:s.data.title,text:s.data.text,icon:s.data.status,allowOutsideClick:!1,confirmButtonText:"รับทราบ"}).then((function(e){e.isConfirmed&&(t.$emit("emitStart"),t.dialog=!1)})):t.$swal({title:"Error 500",icon:"error",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),r.hide();case 10:case"end":return e.stop()}}),e)})))()},clickStart:function(){var t=this;return c(a.a.mark((function e(){var r,n,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={ntpfc:t.propNtpfc},e.next=3,t.$store.dispatch("orderNoticeOfPaymentFromCustomer/getCheckSlip",r);case 3:n=e.sent,s=n.data.notice,t.ref=s.ref,t.ntpfc=s,t.amount=s.amount,t.status=s.status,t.sumAll=n.data.sumAll;case 10:case"end":return e.stop()}}),e)})))()}}},o=r(1),l=Object(o.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"800",scrollable:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{elevation:"0"},on:{click:t.clickStart}},n),[r("v-icon",{attrs:{left:""}},[t._v("list")]),t._v(" "),r("strong",[t._v("รายละเอียด")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",{staticClass:"text-h6 white--text warning"},[t._v("\n        ตรวจสอบสลิปชำระเงิน\n        "),r("v-spacer"),t._v(" "),r("v-btn",{staticClass:"white",attrs:{icon:"",fab:"","x-small":""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",{attrs:{color:"error"}},[t._v("close")])],1)],1),t._v(" "),r("v-card-text",{staticClass:"pt-4"},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-img",{attrs:{src:"https://drive.google.com/thumbnail?id="+t.propNtpfc.src_name+"&sz=w800-h800"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[r("v-text-field",{staticClass:"mb-3",attrs:{label:"ยอดคงเหลือ","hide-details":"",readonly:"",outlined:"",suffix:"บาท",required:""},model:{value:t.sumAll.sumBalance,callback:function(e){t.$set(t.sumAll,"sumBalance",e)},expression:"sumAll.sumBalance"}}),t._v(" "),r("v-text-field",{staticClass:"mb-3",attrs:{label:"จำนวนเงิน","hide-details":"",type:"number",pattern:"/d*",outlined:"",suffix:"บาท",required:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),r("v-text-field",{attrs:{label:"ref","hide-details":"",outlined:"",disabled:"create"!==t.status},model:{value:t.ref,callback:function(e){t.ref=e},expression:"ref"}}),t._v(" "),r("v-divider"),t._v(" "),"create"===t.status?r("v-btn",{staticClass:"success",attrs:{"x-large":"",disabled:!t.ref||!t.amount},on:{click:t.clickCheckSlip}},[r("v-icon",{attrs:{left:""}},[t._v("check_circle")]),t._v(" "),r("strong",[t._v("ตรวจสอบ")])],1):t._e(),t._v(" "),"success"===t.status?r("v-btn",{staticClass:"success",attrs:{"x-large":"",disabled:!t.ref||!t.amount},on:{click:t.clickUpdateSlip}},[r("v-icon",{attrs:{left:""}},[t._v("check_circle")]),t._v(" "),r("strong",[t._v("ปรับปรุงรายการ")])],1):t._e(),t._v(" "),"cancel"===t.status?r("v-btn",{staticClass:"success",attrs:{"x-large":""},on:{click:t.clickAppealSlip}},[r("v-icon",{attrs:{left:""}},[t._v("check_circle")]),t._v(" "),r("strong",[t._v("อุทธรณ์")])],1):t._e()],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,u=r(2);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e,r,n,a,s,c){try{var i=t[s](c),o=i.value}catch(t){return void r(t)}i.done?e(o):Promise.resolve(o).then(n,a)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function c(t){p(s,n,a,c,i,"next",t)}function i(t){p(s,n,a,c,i,"throw",t)}c(void 0)}))}}var v=r(4);Vue.filter("formatNumber",(function(t){return v(t).format("0,0.00")}));var h={components:{cardCheckSlip:l},data:function(){return{}},methods:{emitStart:function(){this.start()},start:function(){this.getNoticeOfPaymentFromCustomer()},getNoticeOfPaymentFromCustomer:function(){var t=this;return m(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$loading.show(),e.next=3,t.$store.dispatch("orderNoticeOfPaymentFromCustomer/getAllByAdmin");case 3:r.hide();case 4:case"end":return e.stop()}}),e)})))()},classNtpfc:function(t){switch(t){case"create":return"blue lighten-1";case"success":return"green lighten-1";case"cancel":return"red lighten-1"}}},mounted:function(){var t=this;return m(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.start();case 2:case"end":return e.stop()}}),e)})))()},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(u.b)({ntpfcs:"orderNoticeOfPaymentFromCustomer/data"}))},w=Object(o.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-simple-table",[r("thead",[r("tr",[r("th",[t._v("Order No.")]),t._v(" "),r("th",{staticClass:"text-center"},[t._v("จำนวนเงิน")]),t._v(" "),r("th",{staticClass:"text-center",attrs:{width:"40%"}},[t._v("การจัดการ")])])]),t._v(" "),r("tbody",t._l(t.ntpfcs,(function(e){return r("tr",{key:e.id,staticClass:"white--text",class:t.classNtpfc(e.status)},[r("td",[r("strong",[t._v("#"+t._s(e.order_id))])]),t._v(" "),r("td",{staticClass:"text-center"},[r("strong",[t._v(t._s(t._f("formatNumber")(e.amount))+" บาท")])]),t._v(" "),r("td",{staticClass:"text-right"},[r("cardCheckSlip",{attrs:{propNtpfc:e},on:{emitStart:t.emitStart}})],1)])})),0)])],1)}),[],!1,null,null,null);e.default=w.exports}}]);