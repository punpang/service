(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{45:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),s=r(2);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e,r,n,a,s,i){try{var o=t[s](i),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,a)}var l={props:["propStatus"],methods:{save:function(){var t,e=this;return(t=a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("WaitressQueueOrder/finished",e.self.id);case 2:if(200===(r=t.sent).status?e.$swal({icon:"success",confirmButtonColor:"#3085d6",title:r.data.message,text:r.data.messageText,confirmButtonText:"รายการถัดไป",allowOutsideClick:!1}):201===r.status&&e.$swal({icon:"warning",confirmButtonColor:"#3085d6",title:r.data.message,confirmButtonText:"รายการถัดไป",allowOutsideClick:!1}),!e.propStatus){t.next=7;break}return t.next=7,e.$store.dispatch("WaitressQueueOrder/self");case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){c(s,n,a,i,o,"next",t)}function o(t){c(s,n,a,i,o,"throw",t)}i(void 0)}))})()}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(s.b)({self:"WaitressQueueOrder/self"}))},u=r(1),p=Object(u.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-bottom-navigation",{staticClass:"yellow darken-4",attrs:{app:"",grow:""}},[r("v-btn",{attrs:{block:"",disabled:!t.self.id},on:{click:function(e){return t.save()}}},[r("span",{staticClass:"white--text"},[t._v(" รายการถัดไป ")]),t._v(" "),r("v-icon",{staticClass:"white--text"},[t._v("arrow_forward_ios")])],1)],1)],1)}),[],!1,null,null,null).exports;function d(t,e,r,n,a,s,i){try{var o=t[s](i),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,a)}var f={props:["propTableOrderDetail"],data:function(){return{dialog:!1,quantity:this.propTableOrderDetail.quantity}},methods:{clickCutCount:function(){0!==this.propTableOrderDetail.quantity&&--this.propTableOrderDetail.quantity},clickAddCount:function(){this.propTableOrderDetail.quantity!==this.quantity&&++this.propTableOrderDetail.quantity},save:function(){var t,e=this;return(t=a.a.mark((function t(){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={table_order_detail_id:e.propTableOrderDetail.id,quantity:e.propTableOrderDetail.quantity},t.next=3,e.$store.dispatch("tableOrderDetail/updateByWaitress",r);case 3:200===(n=t.sent).status?e.$swal({title:n.data.msg,icon:"success",allowOutsideClick:!1,confirmButtonText:"เรียบร้อย"}):201===n.status&&e.$swal({title:n.data.msg,icon:"warning",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),e.dialog=!1;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){d(s,n,a,i,o,"next",t)}function o(t){d(s,n,a,i,o,"throw",t)}i(void 0)}))})()},exit:function(){this.propTableOrderDetail.quantity=this.quantity,this.dialog=!1}}};function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t,e,r,n,a,s,i){try{var o=t[s](i),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,a)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){_(s,n,a,i,o,"next",t)}function o(t){_(s,n,a,i,o,"throw",t)}i(void 0)}))}}var h={props:["propStatus"],components:{btnSave:p,downQuantity:Object(u.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("p",t._g({staticClass:"text-subtitle-2 blue--text mb-2 pl-4"},n),[t._v("ปรับจำนวน")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-text",{staticClass:"pa-2"},[r("h3",{staticClass:"ml-2 mr-2 mt-4 mb-2 text-center black--text"},[t._v("\n          "+t._s(t.propTableOrderDetail.product.title)+"\n        ")])]),t._v(" "),r("v-card-actions",[r("v-row",[r("v-col",{staticClass:"pr-1 pl-2",attrs:{cols:"3"}},[r("v-btn",{attrs:{outlined:"","x-large":"",block:"",disabled:this.propTableOrderDetail.quantity<=0},on:{click:function(e){return t.clickCutCount()}}},[r("h3",{staticClass:"mb-1"},[t._v("-")])])],1),t._v(" "),r("v-col",{staticClass:"px-1",attrs:{cols:"6"}},[r("v-btn",{attrs:{outlined:"","x-large":"",block:""}},[r("h3",{staticClass:"mb-0"},[t._v("\n                "+t._s(t.propTableOrderDetail.quantity)+"\n              ")])])],1),t._v(" "),r("v-col",{staticClass:"pl-1 pr-2",attrs:{cols:"3"}},[r("v-btn",{attrs:{outlined:"","x-large":"",block:"",disabled:this.propTableOrderDetail.quantity===this.quantity},on:{click:function(e){return t.clickAddCount()}}},[r("h3",{staticClass:"mb-1"},[t._v("+")])])],1)],1)],1),t._v(" "),r("v-card-actions",[r("v-row",[r("v-col",{staticClass:"px-2"},[r("v-btn",{attrs:{color:"success","x-large":"",block:"",disabled:this.propTableOrderDetail.quantity===this.quantity},on:{click:function(e){return t.save()}}},[r("v-icon",{attrs:{left:""}},[t._v("done")]),t._v("\n              บันทึก")],1)],1),t._v(" "),r("v-col",{staticClass:"px-2"},[r("v-btn",{attrs:{color:"error","x-large":"",block:""},on:{click:function(e){return t.exit()}}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n              ออก")],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{countUp:1}},methods:{save:function(){var t=this;return m(a.a.mark((function e(){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("WaitressQueueOrder/finished",t.self.id);case 2:if(200===(r=e.sent).status?t.$swal({icon:"success",confirmButtonColor:"#3085d6",title:r.data.message,text:r.data.messageText,confirmButtonText:"รายการถัดไป",allowOutsideClick:!1}):201===r.status&&t.$swal({icon:"warning",confirmButtonColor:"#3085d6",title:r.data.message,confirmButtonText:"รายการถัดไป",allowOutsideClick:!1}),!t.propStatus){e.next=7;break}return e.next=7,t.$store.dispatch("WaitressQueueOrder/self");case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){return m(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},computed:b(b({},Object(s.b)({self:"WaitressQueueOrder/self"})),Object(s.b)({sumQuantity:"WaitressQueueOrder/sumQuantity"}))},y=Object(u.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.self.id?r("v-card",[r("v-card-title",[r("h3",{staticClass:"mb-0"},[t._v("# "+t._s(t.self.id))]),t._v(" "),r("v-spacer"),t._v(" "),r("h5",{staticClass:"mb-0"},[t._v("ทั้งหมด "+t._s(t.sumQuantity)+" ถาด")])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-card-text",[r("v-simple-table",[r("tbody",t._l(t.self.table_order_details,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"px-0"},[r("h3",{staticClass:"mt-2"},[t._v("\n                "+t._s(e.product.title)+"\n                ")]),t._v(" "),r("downQuantity",{attrs:{propTableOrderDetail:e}})],1),t._v(" "),r("td",{staticClass:"text-right px-0"},[r("h3",{staticClass:"mt-2 mb-9"},[t._v("X "+t._s(e.quantity))])])])})),0)])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"})],1):r("v-alert",{attrs:{dense:"",type:"info"}},[r("strong",[t._v("ยังไม่มีรายการอาหาร")])]),t._v(" "),r("btnSave",{attrs:{propStatus:t.propStatus}})],1)}),[],!1,null,null,null).exports;function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var x={props:["propStatus"],components:{btnSave:p},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(s.b)({self:"WaitressQueueOrder/self"}))};function j(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function k(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P(t,e,r,n,a,s,i){try{var o=t[s](i),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(n,a)}function C(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function i(t){P(s,n,a,i,o,"next",t)}function o(t){P(s,n,a,i,o,"throw",t)}i(void 0)}))}}var D={components:{finished:y,cookingDetail:Object(u.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"mb-4"},[r("v-card-title",[r("h1",{staticClass:"mb-0 pt-2"},[r("strong",[t._v(t._s(t.self.table_dining_select_user_id.detail_table.name))])])]),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-card-text",[r("v-simple-table",[r("tbody",[r("tr",[r("td",[t.self.detail_cooking.count_of_dining_equipment>0?r("h2",[t._v("\n                จานช้อน x\n                "+t._s(t.self.detail_cooking.count_of_dining_equipment)+" ชุด\n              ")]):t._e(),t._v(" "),t.self.detail_cooking.type_cooking?r("h2",{staticClass:"mb-1"},[t._v("\n                "+t._s(t.self.detail_cooking.type_cooking.title)+"\n              ")]):t._e(),t._v(" "),t._l(t.self.detail_cooking.broth_details,(function(e){return t.self.detail_cooking.broth_details?r("h5",{key:e.id,staticClass:"pl-6 mb-0 pt-3"},[t._v("\n                x "+t._s(e.product.title)+"\n              ")]):t._e()}))],2)])])])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"})],1),t._v(" "),r("v-btn",{attrs:{block:"","x-large":"",color:"error"}},[t._v(" ยกเลิกรายการ ")]),t._v(" "),r("btnSave",{attrs:{propStatus:t.propStatus}})],1)}),[],!1,null,null,null).exports},data:function(){return{status:!1}},methods:{start:function(){var t=this;return C(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.status&&t.$store.dispatch("WaitressQueueOrder/self");case 1:case"end":return e.stop()}}),e)})))()},playSound:function(){return C(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://soundbible.com/mp3/Fire_pager-jason-1283464858.mp3",e=new Audio("https://soundbible.com/mp3/Fire_pager-jason-1283464858.mp3"),t.next=4,e.play();case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){var t=this;window.Echo.channel("WaitressQueueOrderProcessingOn").listen(".WaitressQueueOrderProcessingAs",(function(e){t.status&&!t.self.id&&(t.playSound(),t.start())}))},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?j(Object(r),!0).forEach((function(e){k(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(s.b)({self:"WaitressQueueOrder/self"}))},S=Object(u.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"mb-4"},[r("v-card-title",[r("h3",[t._v("เสิร์ฟ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-switch",{attrs:{inset:""},on:{click:function(e){return t.start()}},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1),t._v(" "),1===t.self.format_id?r("finished",{attrs:{propStatus:t.status}}):2===t.self.format_id?r("cookingDetail",{attrs:{propStatus:t.status}}):r("v-alert",{attrs:{dense:"",type:"info"}},[r("strong",[t._v("ยังไม่มีรายการอาหาร")])])],1)}),[],!1,null,null,null);e.default=S.exports}}]);