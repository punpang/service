(window.webpackJsonp=window.webpackJsonp||[]).push([[2,4],{12:function(t,e,r){"use strict";r.r(e);var a=r(0),o=r.n(a);function s(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var n={props:["search"],data:function(){return{loadingSubmit:!1,dialogAddCustomer:!1,form:{name:"",phone:""}}},methods:{start:function(){this.form.phone=this.search},submit:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.addCustomerForm.validate()){t.next=8;break}return e.loadingSubmit=!0,t.next=4,e.$store.dispatch("customer/add",e.form);case 4:200===(r=t.sent).status?(e.$toast.success("สำเร็จ"),e.dialogAddCustomer=!1,e.loadingSubmit=!1,e.$refs.addCustomerForm.reset()):422===r.status?(e.form.phone="",e.$toast.warning(r.data.errors.phone[0]),e.loadingSubmit=!1):e.$toast.warning("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง"),t.next=9;break;case 8:e.$toast.warning("โปรดกรอกข้อมูลให้ถูกต้อง");case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var n=t.apply(e,r);function i(t){s(n,a,o,i,c,"next",t)}function c(t){s(n,a,o,i,c,"throw",t)}i(void 0)}))})()},reset:function(){this.$refs.addCustomerForm.reset(),this.$toast.error("ล้างสำเร็จ")}}},i=r(1),c=Object(i.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",[r("v-col",[r("h3",[t._v("รายชื่อลูกค้า")]),t._v(" "),r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"info"},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v("add")]),t._v("\n                    เพิ่มลูกค้ารายใหม่\n                ")],1)]}}]),model:{value:t.dialogAddCustomer,callback:function(e){t.dialogAddCustomer=e},expression:"dialogAddCustomer"}},[t._v(" "),r("v-card",[r("v-card-title",[r("h3",[t._v("เพิ่มลูกค้ารายใหม่")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialogAddCustomer=!1}}},[r("v-icon",{attrs:{color:"error"}},[t._v("close")])],1)],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"addCustomerForm",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{label:"ชื่อลูกค้า",rules:[function(t){return!!t||"ห้ามเว้นว่าง"}],"append-icon":"person"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("v-text-field",{attrs:{label:"เบอร์โทร",counter:10,rules:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return 10==t.length||"กรอกเบอร์โทร 10 หลักเท่านั้น"},function(t){return/[0]{1}[0-9]{9}/.test(t)||"กรุณาขึ้นต้นด้วยเลข 0 และกรอกเบอร์โทร 10 หลักเท่านั้น"}],"append-icon":"phone"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)],1),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"success",loading:t.loadingSubmit},on:{click:t.submit}},[r("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("เพิ่มลูกค้าใหม่")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[r("v-icon",{attrs:{left:""}},[t._v("refresh")]),t._v("ล้างข้อมูล")],1)],1)],1)],1)],1),t._v(" "),r("v-spacer")],1)}),[],!1,null,null,null).exports;function l(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var u={props:["data"],data:function(){return{dialogEdit:!1,loadSave:!1,form:{id:this.data.id,name:this.data.name,phone:this.data.phone}}},methods:{save:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.editForm.validate()){t.next=6;break}return e.loadSave=!0,t.next=4,e.$store.dispatch("customer/edit",e.form);case 4:200===(r=t.sent).status?(e.loadSave=!1,e.dialogEdit=!1,e.$toast.success("แก้ไขข้อมูลสำเร็จ")):422===r.status?(e.form.phone="",e.$toast.warning(r.data.errors.phone[0]),e.loadSave=!1):e.$toast.warning("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง");case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){l(s,a,o,n,i,"next",t)}function i(t){l(s,a,o,n,i,"throw",t)}n(void 0)}))})()},savea:function(){var t=this;this.$refs.editForm.validate()&&(this.loadSave=!0,axios.post("/api/customer/"+this.data.id+"/edit",{name:this.form.name,phone:this.form.phone},{headers:{Authorization:this.$store.getters["main/AuthToken"]}}).then((function(e){t.$store.commit("customer/getCustomers",e.data),t.loadSave=!1,t.dialogEdit=!1,t.$toast.success("แก้ไขข้อมูลสำเร็จ")})).catch((function(e){422==e.response.status?t.$toast.error(e.response.data.errors.phone[0]):t.$toast.warning("กรุณาลองอีกครั้งภายหลัง"),t.loadSave=!1})))}}},d={props:["data"],data:function(){return{dialogDelete:!1,confirm:"",form:{name:this.data.name,phone:this.data.phone}}},methods:{submitDelete:function(){this.$refs.deleteForm.validate()&&("ลบข้อมูล"==this.confirm?(this.$toast.success("ลบข้อมูลเรียบร้อย"),this.$refs.deleteForm.reset()):this.$toast.error("กรุณากรอกคำว่า 'ลบข้อมูล' ลงในช่องว่าง"))}}};function v(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var m={props:["selectCustomerInGet"],components:{editCustomer:Object(i.a)(u,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"warning",fab:"","x-small":""}},a),[r("v-icon",[t._v("edit")])],1)]}}]),model:{value:t.dialogEdit,callback:function(e){t.dialogEdit=e},expression:"dialogEdit"}},[t._v(" "),r("v-form",{ref:"editForm",attrs:{"lazy-validation":""}},[r("v-card",[r("v-card-title",[r("h3",[t._v("แก้ไขข้อมูล")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialogEdit=!1}}},[r("v-icon",{attrs:{color:"error"}},[t._v("close")])],1)],1),t._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"ชื่อลูกค้า",rules:[function(t){return!!t||"ห้ามเว้นว่าง"}],"append-icon":"person"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("v-text-field",{attrs:{label:"เบอร์โทร",counter:10,rules:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return 10==t.length||"กรอกเบอร์โทร 10 หลักเท่านั้น"},function(t){return/[0]{1}[0-9]{9}/.test(t)||"กรุณาขึ้นต้นด้วยเลข 0 และกรอกเบอร์โทร 10 หลักเท่านั้น"}],"append-icon":"phone"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"success",loading:t.loadSave},on:{click:t.save}},[r("v-icon",{attrs:{left:""}},[t._v("edit")]),t._v("\n                        บันทึกข้อมูล\n                    ")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialogEdit=!1}}},[r("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                        ยกเลิก\n                    ")],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports,deleteCustomer:Object(i.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"error",fab:"","x-small":""}},a),[r("v-icon",[t._v("delete")])],1)]}}]),model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[t._v(" "),r("v-card",[r("v-card-title",[r("h3",[t._v("ลบข้อมูล")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{icon:"",color:"error"},on:{click:function(e){t.dialogDelete=!1}}},[r("v-icon",[t._v("close")])],1)],1),t._v(" "),r("v-card-text",[r("v-text-field",{attrs:{readonly:"",label:"ชื่อลูกค้า"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),r("v-text-field",{attrs:{readonly:"",label:"เบอร์โทร"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}}),t._v(" "),r("v-alert",{attrs:{type:"warning"}},[t._v("ต้องการลบข้อมูลนี้หรือไม่")]),t._v("\n                กรุณากรอกคำว่า "),r("b",[t._v('"ลบข้อมูล"')]),t._v(" ลงในช่องว่าง\n                "),r("v-form",{ref:"deleteForm",attrs:{"lazy-validation":""}},[r("v-text-field",{attrs:{autofocus:"",counter:8,rules:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return 8==t.length}]},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}})],1)],1),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"warning"},on:{click:t.submitDelete}},[r("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                    ลบข้อมูล\n                ")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialogDelete=!1}}},[r("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                    ปิด\n                ")],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{loadingTable:!0,search:"",headerTable:[{text:"ชื่อลูกค้า",value:"name"},{text:"เบอร์โทร",value:"phone"},{text:"การจัดการ",value:"action"}]}},methods:{remove:function(){confirm("คุณต้องการลบใช่หรือไม่")},clickSelectCustomer:function(t){this.$emit("onCustomer",t)},changeSearch:function(t){this.$emit("onSearch",t)}},beforeCreate:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("customer/get");case 2:200===t.sent.status?(e.loadingTable=!1,e.$toast.success("โหลดข้อมูลลูกค้าสำเร็จ")):(e.$toast.warning("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้ง"),e.loadingTable=!1);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){v(s,a,o,n,i,"next",t)}function i(t){v(s,a,o,n,i,"throw",t)}n(void 0)}))})()}},f={props:["selectCustomer"],components:{addCustomer:c,getCustomer:Object(i.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-text-field",{attrs:{label:"ค้นหาลูกค้าจากหมายเลขโทรศัพท์","append-icon":"search",type:"number",pattern:"/d*"},on:{change:function(e){return t.changeSearch(t.search)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),r("v-data-table",{attrs:{headers:t.headerTable,items:this.$store.getters["customer/getCustomers"],loading:t.loadingTable,search:t.search,"no-results-text":"ไม่พบข้อมูลที่ค้นหา","loading-text":"รอสักครู่...กำลังโหลดข้อมูล","item-key":"id"},scopedSlots:t._u([{key:"item.action",fn:function(e){var a=e.item;return[r("v-container",[r("v-row",[r("editCustomer",{staticClass:"mr-2",attrs:{data:a}}),t._v(" "),r("deleteCustomer",{staticClass:"mr-2",attrs:{data:a}}),t._v(" "),1==t.selectCustomerInGet?r("v-btn",{attrs:{fab:"","x-small":"",color:"info"},on:{click:function(e){return t.clickSelectCustomer(a)}}},[r("v-icon",[t._v("get_app")])],1):t._e()],1)],1)]}}])})],1)}),[],!1,null,null,null).exports},data:function(){return{search:""}},methods:{onCustomer:function(t){this.$emit("onCustomer",t)},onSearch:function(t){this.search=t}}},_=Object(i.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("addCustomer",{attrs:{search:this.search}}),this._v(" "),e("getCustomer",{attrs:{selectCustomerInGet:this.selectCustomer},on:{onCustomer:this.onCustomer,onSearch:this.onSearch}})],1)}),[],!1,null,null,null);e.default=_.exports},2:function(t,e,r){"use strict";var a={props:["overlay"]},o=r(1),s=Object(o.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-overlay",{attrs:{value:this.overlay}},[e("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)}),[],!1,null,null,null);e.a=s.exports},35:function(t,e,r){"use strict";r.r(e);var a=r(0),o=r.n(a),s={props:["tag"]},n=r(1),i=Object(n.a)(s,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    "+this._s(this.tag.product_category_sub_use_only.product_category.name)+"\n    :\n    "+this._s(this.tag.product_category_sub_use_only.name)+"\n")])}),[],!1,null,null,null).exports;function c(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var l={components:{tagsProduct:i},data:function(){return{dialog:!1,search:"",headers:[{text:"รูปภาพ",value:"image",align:"center"},{text:"ชื่อสินค้า",value:"name",align:"center"},{text:"ราคา",value:"price",align:"center"},{text:"แท็กสินค้า",value:"tags",align:"center"},{text:"การจัดการ",value:"action",align:"end"}]}},methods:{clickSelectProduct:function(t){this.$emit("emitSelectProduct",t),this.dialog=!1}},beforeCreate:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("product/getUseOnly");case 2:e.loadingTable=!1,e.overlay=!1;case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){c(s,a,o,n,i,"next",t)}function i(t){c(s,a,o,n,i,"throw",t)}n(void 0)}))})()}},u=Object(n.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"",width:"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"primary",block:"",large:""}},a),[r("v-icon",{attrs:{left:""}},[t._v("fiber_new")]),t._v("\n            เลือกสินค้า\n        ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n            รายการสินค้า\n            "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-text-field",{attrs:{label:"ค้นหาสินค้า","append-icon":"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),r("v-data-table",{attrs:{items:this.$store.getters["product/dataUseOnly"],"item-key":"id",headers:t.headers,search:t.search},scopedSlots:t._u([{key:"item.image",fn:function(t){var e=t.item;return[r("v-img",{directives:[{name:"show",rawName:"v-show",value:1==e.image_status,expression:"item.image_status == true"}],attrs:{width:"100",src:"https://drive.google.com/thumbnail?id="+e.product_image.src_name}})]}},{key:"item.price",fn:function(e){var a=e.item;return[0==a.price_special_status?r("span",[t._v(t._s(a.price_normal))]):r("span",[t._v(t._s(a.price_special))])]}},{key:"item.tags",fn:function(e){var a=e.item;return t._l(a.product_tag_use_only,(function(t){return r("div",{key:t.id},[r("tagsProduct",{attrs:{tag:t}})],1)}))}},{key:"item.action",fn:function(e){var a=e.item;return[r("v-btn",{attrs:{color:"info",small:""},on:{click:function(e){return t.clickSelectProduct(a)}}},[t._v("\n                        เลือก\n                    ")])]}}])})],1)],1)],1)}),[],!1,null,null,null).exports,d={props:["product"],data:function(){return{priceProduct:0}},methods:{Processing:function(t){0==t.price_special_status?this.priceProduct=t.price_normal:this.priceProduct=t.price_special;var e={price:this.priceProduct};this.$emit("emitProcessed",e)}}},v=Object(n.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    "+this._s(this.Processing(this.product))+"\n")])}),[],!1,null,null,null).exports,m=r(2);function f(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){f(s,a,o,n,i,"next",t)}function i(t){f(s,a,o,n,i,"throw",t)}n(void 0)}))}}var p={props:["order"],components:{selectProduct:u,tagsProduct:i,processingProduct:v,overlay:m.a},data:function(){return{dialog:!1,overlay:!1,product:{id:0,product_image:{src_name:""}},priceProduct:0,form:{},Rules:{order_id:[function(t){return!!t}],product_id:[function(t){return!!t}],write:[function(t){return!!t}],note:[function(t){return!!t}],price:[function(t){return!!t}],quantity:[function(t){return!!t},function(t){return t>0}],sum_price:[function(t){return!!t}]}}},methods:{save:function(){var t=this;return _(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.overlay=!0,!t.$refs.form.validate()){e.next=9;break}return e.next=4,t.$store.dispatch("orderDetail/store",t.form);case 4:r=e.sent,console.log(r),200==r.status?(t.$toast.success("ลงสินค้าสำหรับรายการสั่งซื้อ #"+t.order.id),t.out()):t.$toast.error("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง"),e.next=10;break;case 9:t.$toast.warning("กรุณากรอกข้อมูลให้ถูกต้อง");case 10:t.overlay=!1;case 11:case"end":return e.stop()}}),e)})))()},changeQuantity:function(t,e){this.form.sum_price=t*e},clickQuantity:function(){this.form.quantity=""},start:function(){var t=this;return _(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.form={order_id:t.order.id,product_id:"",write_status:!0,write:"",note_status:!0,upload_image_status:!1,note:"",price:"",quantity:"1",sum_price:"",status:!0},t.product={id:0,product_image:{src_name:""},price_normal:0,price_special_status:0,price_special:0};case 2:case"end":return e.stop()}}),e)})))()},out:function(){this.dialog=!1,this.overlay=!1},emitSelectProduct:function(t){this.product=t,this.form.product_id=t.id},changeWriteStatus:function(t){0==t?""==this.form.write&&(this.form.write="no message"):"no message"==this.form.write&&(this.form.write="")},changeNoteStatus:function(t){0==t?""==this.form.note&&(this.form.note="no note"):"no note"==this.form.note&&(this.form.note="")},emitProcessed:function(t){this.form.price=t.price,this.changeQuantity(this.form.quantity,t.price)}}};Object(n.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-list-item",t._g({staticClass:"teal darken-1",on:{click:t.start}},a),[r("v-list-item-icon",[r("v-icon",[t._v("add_shopping_cart")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("เพิ่มสินค้าใหม่")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n                เพิ่มสินค้าใหม่\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-card",[r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("selectProduct",{on:{emitSelectProduct:t.emitSelectProduct}}),t._v(" "),r("v-divider"),t._v(" "),t.product.id>=1?r("v-img",{attrs:{width:"auto",src:"https://drive.google.com/thumbnail?id="+t.product.product_image.src_name}}):t._e()],1),t._v(" "),t.product.id>=1?r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",[r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{label:"ชื่อสินค้า",outlined:"",placeholder:"คลิกที่นี่เพื่อเลือกสินค้า",readonly:"","hide-details":""},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{label:"ราคา/หน่วย",outlined:"",placeholder:"กรุณาเลือกสินค้า",readonly:"",rules:t.Rules.price,suffix:"บาท","hide-details":""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"จำนวน",outlined:"",type:"number",pattern:"\\d*",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.quantity,suffix:"หน่วย","hide-details":""},on:{click:t.clickQuantity,change:function(e){return t.changeQuantity(t.form.quantity,t.form.price)}},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"ราคารวม",outlined:"",placeholder:"กรุณาเลือกสินค้า",readonly:"",rules:t.Rules.sum_price,suffix:"บาท","hide-details":""},model:{value:t.form.sum_price,callback:function(e){t.$set(t.form,"sum_price",e)},expression:"form.sum_price"}})],1),t._v(" "),t._l(t.product.product_tag_use_only,(function(e){return r("v-col",{key:e.id,attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:e.product_category_sub_use_only.product_category.name,outlined:"",readonly:"","hide-details":""},model:{value:e.product_category_sub_use_only.name,callback:function(r){t.$set(e.product_category_sub_use_only,"name",r)},expression:"\n                                                    tag.product_category_sub_use_only\n                                                        .name\n                                                "}})],1)})),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":""},on:{change:t.changeWriteStatus},model:{value:t.form.write_status,callback:function(e){t.$set(t.form,"write_status",e)},expression:"\n                                                        form.write_status\n                                                    "}}),t._v(" "),r("v-textarea",{attrs:{label:"เขียนข้อความ","hide-details":"",outlined:"",rows:"1",rules:t.Rules.write,readonly:0==t.form.write_status},model:{value:t.form.write,callback:function(e){t.$set(t.form,"write",e)},expression:"form.write"}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":""},on:{change:t.changeNoteStatus},model:{value:t.form.note_status,callback:function(e){t.$set(t.form,"note_status",e)},expression:"\n                                                        form.note_status\n                                                    "}}),t._v(" "),r("v-textarea",{attrs:{label:"เพิ่มเติม","hide-details":"",outlined:"",rows:"2",rules:t.Rules.note,readonly:0==t.form.note_status},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",label:"ส่งลิงก์อัปโหลดรูปภาพ"},model:{value:t.form.upload_image_status,callback:function(e){t.$set(t.form,"upload_image_status",e)},expression:"\n                                                        form.upload_image_status\n                                                    "}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-btn",{staticClass:"mr-2",attrs:{color:"success"},on:{click:t.save}},[r("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                                                    เรียบร้อย")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.out}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                                                    ออก")],1)],1)],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 == 0"}]},[r("v-text-field",{attrs:{label:"product id",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.product_id,"hide-details":""},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}}),t._v(" "),r("v-text-field",{attrs:{label:"order id",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.order_id,"hide-details":""},model:{value:t.form.order_id,callback:function(e){t.$set(t.form,"order_id",e)},expression:"form.order_id"}})],1)],2)],1):r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-alert",{attrs:{color:"blue-grey",dark:"",dense:"",prominent:""}},[t._v('\n                                        กรุณาเลือกสินค้าก่อน "เลือกสินค้า"\n                                    ')])],1)],1)],1)],1)],1)],1)],1),t._v(" "),r("processingProduct",{attrs:{product:t.product},on:{emitProcessed:t.emitProcessed}}),t._v("\n\n        "+t._s(t.product)+"\n\n        "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports;function h(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){h(s,a,o,n,i,"next",t)}function i(t){h(s,a,o,n,i,"throw",t)}n(void 0)}))}}var y={props:["order","action","detail"],components:{selectProduct:u,tagsProduct:i,processingProduct:v,overlay:m.a},data:function(){return{dialog:!1,overlay:!1,response:{},product:{id:0,product_image:{src_name:""}},priceProduct:0,form:{},Rules:{order_id:[function(t){return!!t}],product_id:[function(t){return!!t}],write:[function(t){return!!t}],note:[function(t){return!!t}],price:[function(t){return!!t}],quantity:[function(t){return!!t},function(t){return t>0}],sum_price:[function(t){return!!t}]}}},methods:{save:function(){var t=this;return g(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.overlay=!0,!t.$refs.form.validate()){e.next=17;break}if("create"!=t.action.method){e.next=8;break}return e.next=5,t.$store.dispatch("orderDetail/store",t.form);case 5:t.response=e.sent,e.next=12;break;case 8:if("update"!=t.action.method){e.next=12;break}return e.next=11,t.$store.dispatch("orderDetail/update",t.form);case 11:t.response=e.sent;case 12:return e.next=14,t.$store.dispatch("order/getByID",t.form.order_id);case 14:200==t.response.status?(t.$toast.success("ทำรายการสำเร็จ"),t.out()):t.$toast.error("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้ง"),e.next=18;break;case 17:t.$toast.warning("กรุณากรอกข้อมูลให้ถูกต้อง");case 18:t.overlay=!1;case 19:case"end":return e.stop()}}),e)})))()},changeQuantity:function(t,e){this.form.sum_price=t*e},clickQuantity:function(){this.form.quantity=""},start:function(){var t=this;return g(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"create"==t.action.method?(t.form={order_id:t.order.id,product_id:"",write_status:!0,write:"",note_status:!0,upload_image_status:!1,note:"",price:"",quantity:"1",sum_price:"",status:!0},t.product={id:0,product_image:{src_name:""},price_normal:0,price_special_status:0,price_special:0}):"update"==t.action.method&&(t.form=t.detail,t.product=t.detail.product);case 1:case"end":return e.stop()}}),e)})))()},out:function(){this.dialog=!1,this.overlay=!1},emitSelectProduct:function(t){this.product=t,this.form.product_id=t.id},changeWriteStatus:function(t){0==t?""==this.form.write&&(this.form.write="no message"):"no message"==this.form.write&&(this.form.write="")},changeNoteStatus:function(t){0==t?""==this.form.note&&(this.form.note="no note"):"no note"==this.form.note&&(this.form.note="")},emitProcessed:function(t){this.form.price=t.price,this.changeQuantity(this.form.quantity,t.price)}}},b=Object(n.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"700"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return["create"==t.action.method?r("v-list-item",t._g({staticClass:"teal darken-1",on:{click:t.start}},a),[r("v-list-item-icon",[r("v-icon",[t._v(t._s(t.action.icon))])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v(t._s(t.action.title))])],1)],1):t._e(),t._v(" "),"update"==t.action.method?r("v-btn",t._g({staticClass:"mr-2 d-none d-sm-flex",attrs:{color:"warning"},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v("edit")]),t._v("\n                "+t._s(t.action.title)+"\n            ")],1):t._e(),t._v(" "),"update"==t.action.method?r("v-btn",t._g({staticClass:"mr-2 d-flex d-sm-none",attrs:{color:"warning",fab:"",small:""},on:{click:t.start}},a),[r("v-icon",[t._v("edit")])],1):t._e()]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n                "+t._s(t.action.title)+"\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-card",[r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("selectProduct",{on:{emitSelectProduct:t.emitSelectProduct}}),t._v(" "),r("v-divider"),t._v(" "),t.product.id>=1?r("v-img",{attrs:{width:"auto",src:"https://drive.google.com/thumbnail?id="+t.product.product_image.src_name}}):t._e()],1),t._v(" "),t.product.id>=1?r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",[r("v-col",{staticClass:"pt-0",attrs:{cols:"12",md:"12"}},[r("v-text-field",{attrs:{label:"ชื่อสินค้า",outlined:"",placeholder:"คลิกที่นี่เพื่อเลือกสินค้า",readonly:"","hide-details":""},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],attrs:{label:"ราคา/หน่วย",outlined:"",placeholder:"กรุณาเลือกสินค้า",readonly:"",rules:t.Rules.price,suffix:"บาท","hide-details":""},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:"จำนวน",outlined:"",type:"number",pattern:"\\d*",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.quantity,suffix:"หน่วย","hide-details":""},on:{click:t.clickQuantity,change:function(e){return t.changeQuantity(t.form.quantity,t.form.price)}},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],attrs:{label:"ราคารวม",outlined:"",placeholder:"กรุณาเลือกสินค้า",readonly:"",rules:t.Rules.sum_price,suffix:"บาท","hide-details":""},model:{value:t.form.sum_price,callback:function(e){t.$set(t.form,"sum_price",e)},expression:"form.sum_price"}})],1),t._v(" "),t._l(t.product.product_tag_use_only,(function(e){return r("v-col",{key:e.id,attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{label:e.product_category_sub_use_only.product_category.name,outlined:"",readonly:"","hide-details":""},model:{value:e.product_category_sub_use_only.name,callback:function(r){t.$set(e.product_category_sub_use_only,"name",r)},expression:"\n                                                    tag\n                                                        .product_category_sub_use_only\n                                                        .name\n                                                "}})],1)})),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":""},on:{change:t.changeWriteStatus},model:{value:t.form.write_status,callback:function(e){t.$set(t.form,"write_status",e)},expression:"\n                                                        form.write_status\n                                                    "}}),t._v(" "),r("v-textarea",{attrs:{label:"เขียนข้อความ","hide-details":"",outlined:"",rows:"1",rules:t.Rules.write,readonly:0==t.form.write_status},model:{value:t.form.write,callback:function(e){t.$set(t.form,"write",e)},expression:"form.write"}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"shrink mr-2 mt-0",attrs:{"hide-details":""},on:{change:t.changeNoteStatus},model:{value:t.form.note_status,callback:function(e){t.$set(t.form,"note_status",e)},expression:"\n                                                        form.note_status\n                                                    "}}),t._v(" "),r("v-textarea",{attrs:{label:"เพิ่มเติม","hide-details":"",outlined:"",rows:"2",rules:t.Rules.note,readonly:0==t.form.note_status},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",label:"ส่งลิงก์อัปโหลดรูปภาพ"},model:{value:t.form.upload_image_status,callback:function(e){t.$set(t.form,"upload_image_status",e)},expression:"\n                                                        form.upload_image_status\n                                                    "}})],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",{staticClass:"px-4"},[r("v-btn",{staticClass:"mr-2",attrs:{color:"success"},on:{click:t.save}},[r("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                                                    เรียบร้อย")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.out}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                                                    ออก")],1)],1)],1),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 == 0"}]},[r("v-text-field",{attrs:{label:"product id",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.product_id,"hide-details":""},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}}),t._v(" "),r("v-text-field",{attrs:{label:"order id",placeholder:"กรุณาเลือกสินค้า",rules:t.Rules.order_id,"hide-details":""},model:{value:t.form.order_id,callback:function(e){t.$set(t.form,"order_id",e)},expression:"form.order_id"}})],1)],2)],1):r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-alert",{attrs:{color:"blue-grey",dark:"",dense:"",prominent:""}},[t._v('\n                                        กรุณาเลือกสินค้าก่อน "เลือกสินค้า"\n                                    ')])],1)],1)],1)],1)],1)],1)],1),t._v(" "),r("processingProduct",{attrs:{product:t.product},on:{emitProcessed:t.emitProcessed}}),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports,x=r(4);function k(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var w={components:{CostSub:x.a,overlay:m.a},data:function(){return{dialog:!1,overlay:!1,deposits:[{value:"0.5",text:"50 เปอร์เซนต์"},{value:"1",text:"ชำระทั้งหมด"},{value:"0",text:"กำหนดอง"}],deposit:"0.5",form:{order_id:this.$store.getters["order/getByID"].data.id,amount:"0"}}},methods:{changeDeposit:function(t){this.form.amount=this.$store.getters["order/getByID"].sum.balance*t},clickSubmit:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.overlay=!0,!e.$refs.form.validate()){t.next=6;break}return t.next=4,e.$store.dispatch("payment/alert",e.form);case 4:200===t.sent.status&&(e.dialog=!1);case 6:e.overlay=!1;case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){k(s,a,o,n,i,"next",t)}function i(t){k(s,a,o,n,i,"throw",t)}n(void 0)}))})()}},mounted:function(){this.changeDeposit(this.deposit)}},$=Object(n.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"350"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"warning"}},a),[t._v("แจ้งชำระเงิน")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n                แจ้งชำระเงิน\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("CostSub",{attrs:{sum:this.$store.getters["order/getByID"].sum}}),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-select",{staticClass:"py-4",attrs:{items:t.deposits,"item-text":"text","item-value":"value",label:"ยอดชำระขั้นต่ำ","hide-details":"",outlined:"",rules:[function(t){return!!t}]},on:{change:function(e){return t.changeDeposit(t.deposit)}},model:{value:t.deposit,callback:function(e){t.deposit=e},expression:"deposit"}}),t._v(" "),r("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],attrs:{label:"จำนวนเงิน",outlined:"",pattern:"\\d*","hide-details":"",disabled:0!=t.deposit,rules:[function(t){return!!t}],suffix:"บาท"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),t._v(" "),r("v-btn",{staticClass:"my-4",attrs:{color:"success",large:""},on:{click:t.clickSubmit}},[r("v-icon",{attrs:{left:""}},[t._v("attach_money")]),t._v("\n                    แจ้งการชำระเงิน\n                ")],1),t._v(" "),r("v-btn",{attrs:{color:"error",large:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                    ออก\n                ")],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports,C={props:["path"]},S=Object(n.a)(C,(function(){var t=this.$createElement;return(this._self._c||t)("v-img",{attrs:{src:"https://drive.google.com/uc?id="+this.path}})}),[],!1,null,null,null).exports;function D(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function P(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){D(s,a,o,n,i,"next",t)}function i(t){D(s,a,o,n,i,"throw",t)}n(void 0)}))}}var O={props:["form"],components:{overlay:m.a},data:function(){return{dialog:!1,slip_un_verify_reasoning_id:"",overlay:!1}},methods:{clickUnVerify:function(){var t=this;return P(o.a.mark((function e(){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.overlay=!0,!t.$refs.form.validate()){e.next=11;break}return r={slip_id:t.form.slip_id,slip_un_verify_reasoning_id:t.slip_un_verify_reasoning_id},e.next=5,t.$store.dispatch("payment/unVerifySlip",r);case 5:return a=e.sent,e.next=8,t.$store.dispatch("order/getByID",t.$store.getters["order/getByID"].data.id);case 8:200===a.status?(t.$emit("emitExit"),t.dialog=!1,t.$toast.success("ทำรายการสำเร็จ")):t.$toast.error("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้งภายหลังค่ะ"),e.next=12;break;case 11:t.$toast.warning("กรุณากรอกข้อมูลให้ครบถ้วน");case 12:t.overlay=!1;case 13:case"end":return e.stop()}}),e)})))()},start:function(){var t=this;return P(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("payment/unVerifyReasoning");case 2:case"end":return e.stop()}}),e)})))()},mounted:function(){this.start()}}},T=Object(n.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"warning"},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v("cancel")]),t._v("\n                ไม่ผ่าน\n            ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                ไม่ผ่านการตรวจสอบ\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-alert",{attrs:{type:"warning"}},[t._v("การแจ้งชำระนี้ ไม่ผ่านการตรวจสอบ")]),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-select",{staticClass:"mb-4",attrs:{outlined:"",label:"เหตุผล",rules:[function(t){return!!t}],"hide-details":"",items:this.$store.getters["payment/unVerifyReasoning"],"item-text":"reasoning","item-value":"id"},model:{value:t.slip_un_verify_reasoning_id,callback:function(e){t.slip_un_verify_reasoning_id=e},expression:"slip_un_verify_reasoning_id"}})],1),t._v(" "),r("v-btn",{attrs:{color:"warning"},on:{click:t.clickUnVerify}},[r("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                    ไม่ผ่าน")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                    ออก")],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports;function E(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function B(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){E(s,a,o,n,i,"next",t)}function i(t){E(s,a,o,n,i,"throw",t)}n(void 0)}))}}var I={props:["sum","form"],components:{CostSub:x.a,overlay:m.a,unVerifyPayment:T},data:function(){return{dialog:!1,overlay:!1,alertRefDouble:!1,moneyBack:{text:"",number:0,numberNot:""}}},methods:{reloadOrderPaymentMethod:function(){var t=this;return B(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("orderPaymentMethod/useonly");case 2:case"end":return e.stop()}}),e)})))()},clickSubmit:function(){var t=this;return B(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=11;break}return t.overlay=!0,r={},e.next=5,t.$store.dispatch("payment/create",t.form);case 5:return r=e.sent,e.next=8,t.$store.dispatch("order/getByID",t.$store.getters["order/getByID"].data.id);case 8:200==r.status?(t.clickExit(),t.overlay=!1,t.$toast.success("รับชำระเงินสำเร็จ")):299==r.status&&(t.$toast.error(r.data.message),t.alertRefDouble=!0,t.overlay=!1),e.next=11;break;case 11:case"end":return e.stop()}}),e)})))()},clickExit:function(){this.$emit("emitExit"),this.dialog=!1,this.reset()},reset:function(){this.$refs.form.reset()},setMoneyBack:function(t,e){if(t){for(var r=t.split(","),a="",o=0;o<r.length;o++)a+=r[o];var s=a-e,n=0;n=s<0?-1*s:s,this.setText(s),this.moneyBack.number=n,this.moneyBack.numberNot=s}},setText:function(t){var e="";e=t<0?"ยอดคงเหลือ":"เงินทอน",this.moneyBack.text=e}},mounted:function(){this.reloadOrderPaymentMethod()}},j=Object(n.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-row",[r("v-col",{staticClass:"pt-4",attrs:{cols:"6",md:"6"}},[t._v("ช่องทางการชำระ\n                "),r("v-icon",{attrs:{right:"",color:"success"},on:{click:t.reloadOrderPaymentMethod}},[t._v("refresh")])],1),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[r("v-select",{staticClass:"ma-0 pa-0",attrs:{items:this.$store.getters["orderPaymentMethod/useonly"],"hide-details":"","item-text":"name","item-value":"id",readonly:"",rules:[function(t){return!!t}]},model:{value:t.form.order_payment_method_id,callback:function(e){t.$set(t.form,"order_payment_method_id",e)},expression:"form.order_payment_method_id"}})],1)],1),t._v(" "),2==t.form.order_payment_method_id?r("v-row",[r("v-col",{staticClass:"pt-4",attrs:{cols:"6",md:"6"}},[t._v("อ้างอิง")]),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{staticClass:"ma-0 pa-0",attrs:{rules:[function(t){return!!t}],"hide-details":"",readonly:""},model:{value:t.form.slip_ref,callback:function(e){t.$set(t.form,"slip_ref",e)},expression:"form.slip_ref"}})],1)],1):t._e(),t._v(" "),t.sum.balance>0?r("v-row",[r("v-col",{staticClass:"pt-4",attrs:{cols:"6",md:"6"}},[t._v("ชำระครั้งนี้")]),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{directives:[{name:"currency",rawName:"v-currency"}],staticClass:"ma-0 pa-0",attrs:{rules:[function(t){return!!t}],"hide-details":"",autocomplete:"false",pattern:"\\d*",suffix:"บาท"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}}),t._v("\n                "+t._s(t.setMoneyBack(t.form.amount,t.sum.balance))+"\n            ")],1)],1):t._e()],1),t._v(" "),0!=t.moneyBack.number?r("v-row",{staticClass:"py-1"},[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v(t._s(t.moneyBack.text))]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v("\n            "+t._s(t.moneyBack.number)+" บาท\n        ")])],1):t._e(),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-checkbox",{attrs:{label:"แจ้งผ่านข้อความ"},model:{value:t.form.alert,callback:function(e){t.$set(t.form,"alert",e)},expression:"form.alert"}}),t._v(" "),r("v-row",{staticClass:"px-4"},[t.alertRefDouble?t._e():r("v-btn",{staticClass:"mr-2",attrs:{color:"success",disabled:t.moneyBack.numberNot>0&&2==t.form.order_payment_method_id||t.form.amount<=0},on:{click:t.clickSubmit}},[r("v-icon",{attrs:{left:""}},[t._v("attach_money")]),t._v("\n            ชำระเงิน\n        ")],1),t._v(" "),2==t.form.order_payment_method_id?r("unVerifyPayment",{staticClass:"mr-2",attrs:{form:t.form},on:{emitExit:t.clickExit}}):t._e(),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.clickExit}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n            ออก\n        ")],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)}),[],!1,null,null,null).exports;function F(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var M={props:["slip"],components:{imageFullPath:S,CostSub:x.a,overlay:m.a,formPayment:j},data:function(){return{dialog:!1,form:{}}},methods:{emitExit:function(){this.dialog=!1},start:function(){this.form={order_id:this.$store.getters["order/getByID"].data.id,order_payment_method_id:2,amount:"0",slip_id:this.slip.id,slip_ref:this.slip.ref,status:1,alert:!0}},clickRef:function(t,e){"ref"==e?this.form.slip_ref=t:"money"==e&&(this.form.amount=t)},clickCheckRef:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=3;break}return t.next=3,e.$store.dispatch("payment/checkRef",e.form);case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){F(s,a,o,n,i,"next",t)}function i(t){F(s,a,o,n,i,"throw",t)}n(void 0)}))})()}}},R={props:["slips"],components:{seeSlipForVerify:Object(n.a)(M,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"850"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"primary",block:"",disabled:1!=t.slip.slip_verify_id},on:{click:t.start}},a),[t._v("\n                ตรวจสอบสลิป\n                "),r("v-icon",{attrs:{right:""}},[t._v("info")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                ตรวจสอบสลิป\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("\n                    close")])],1),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"5"}},[r("imageFullPath",{attrs:{path:t.slip.path}}),t._v(" "),r("v-divider"),t._v(" "),t._l(t.slip.google_ocr,(function(e){return t.slip.ref?t._e():r("v-btn",{key:e.id,staticClass:"mr-1 mb-1",attrs:{rounded:"",color:"orange"},on:{click:function(r){return t.clickRef(e.ocr_text,e.type)}}},[t._v("\n                            "+t._s(e.ocr_text)+"\n                        ")])}))],2),t._v(" "),r("v-col",{attrs:{cols:"12",md:"7"}},[r("v-row",[r("v-col",{attrs:{cols:"5",md:"6"}},[t._v("วัน-เวลาแจ้งชำระ")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"7",md:"6"}},[t._v(t._s(t.slip.created_at))])],1),t._v(" "),r("CostSub",{attrs:{sum:this.$store.getters["order/getByID"].sum}}),t._v(" "),r("formPayment",{attrs:{sum:this.$store.getters["order/getByID"].sum,form:t.form},on:{emitExit:t.emitExit}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{dialog:!1,headers:[{text:"วัน-เวลาแจ้งชำระเงิน",value:"created_at"},{text:"สถานะ",value:"slip_verify",align:"center",sortable:!1},{text:"การจัดการ",value:"action",align:"end",sortable:!1}]}}},N=Object(n.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"primary"}},a),[t._v("\n                ตรวจสอบสลิป\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                ตรวจสอบสลิป\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-card-text",[r("v-data-table",{attrs:{items:t.slips,headers:t.headers,"hide-default-footer":"","items-per-page":100},scopedSlots:t._u([{key:"item.slip_verify",fn:function(e){var a=e.item;return[r("v-btn",{attrs:{color:a.slip_verify.style,block:""}},[t._v("\n                            "+t._s(a.slip_verify.text)+"\n                        ")])]}},{key:"item.action",fn:function(t){var e=t.item;return[r("seeSlipForVerify",{attrs:{slip:e}})]}}])})],1)],1)],1)],1)}),[],!1,null,null,null).exports,A={props:["sum"],components:{CostSub:x.a,overlay:m.a,formPayment:j},data:function(){return{dialog:!1,response:{},overlay:!1,form:{order_id:this.$store.getters["order/getByID"].data.id,order_payment_method_id:1,amount:"0",status:1,alert:!0}}},methods:{emitExit:function(){this.dialog=!1}}},q=Object(n.a)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.sum.balance>0?r("v-dialog",{attrs:{persistent:"",width:"350"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"success"}},a),[t._v("รับชำระเงิน")])]}}],null,!1,1529103533),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n                รับชำระเงิน\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:t.emitExit}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("CostSub",{attrs:{sum:this.$store.getters["order/getByID"].sum}}),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("formPayment",{attrs:{sum:this.$store.getters["order/getByID"].sum,form:t.form},on:{emitExit:t.emitExit}})],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1):t._e()],1)}),[],!1,null,null,null).exports,z={props:["status"],methods:{setStatusColor:function(t){return 1===t?"success":0===t?"error":void 0},setStatusText:function(t){return 1===t?"ใช้งานอยู่":0===t?"ยกเลิกแล้ว":void 0}}},V=Object(n.a)(z,(function(){var t=this.$createElement;return(this._self._c||t)("v-btn",{attrs:{color:this.setStatusColor(this.status),small:"",block:""}},[this._v(this._s(this.setStatusText(this.status)))])}),[],!1,null,null,null).exports;function Q(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var H={props:["payment"],components:{setStautsColorText:V,overlay:m.a},data:function(){return{dialog:!1,overlay:!1}},methods:{start:function(){this.$refs.form.reset()},clickCancelPayment:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.overlay=!0,!e.$refs.form.validate()){t.next=10;break}return t.next=4,e.$store.dispatch("payment/cancel",e.payment.id);case 4:return r=t.sent,t.next=7,e.$store.dispatch("order/getByID",e.payment.order_id);case 7:200==r.status?(e.$toast.success(r.data.message),e.$refs.form.reset(),e.dialog=!1):201==r.status?(e.$toast.warning(r.data.message),e.dialog=!1,e.$refs.form.reset(),e.overlay=!1):(e.$toast.error("กรุณาลองอีกครั้ง ผิดพลาดบางอย่าง"),e.overlay=!1),t.next=12;break;case 10:e.overlay=!1,e.$toast.error("กรุณาลองอีกครั้ง ผิดพลาดบางอย่าง");case 12:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){Q(s,a,o,n,i,"next",t)}function i(t){Q(s,a,o,n,i,"throw",t)}n(void 0)}))})()}}},U={props:["payments"],components:{cancelPayment:Object(n.a)(H,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"350"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"error",small:"",disabled:0===t.payment.status},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v("cancel")]),t._v("\n                ยกเลิกรายการ\n            ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                ยกเลิกการชำระเงิน\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("คำสั่งซื้อ")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v("#"+t._s(t.payment.order_id))])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("ช่องทางการชำระเงิน")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.payment.order_payment_method.name))])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("เลขที่ใบเสร็จ")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v("#"+t._s(t.payment.bill_id))])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("สถานะ")]),t._v(" "),r("v-col",{staticClass:"text-right py-2",attrs:{cols:"6",md:"6"}},[r("setStautsColorText",{attrs:{status:t.payment.status}})],1)],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("วัน-เวลาทำรายการ")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v("\n                        "+t._s(t.payment.updated_at)+"\n                    ")])],1),t._v(" "),r("v-alert",{attrs:{type:"warning"}},[t._v("ต้องการยกเลิกรายการใช่ไหม ?")]),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{staticClass:"mb-4",attrs:{outlined:"",label:"โปรดกรอกคำนวน 'ยกเลิก' ลงในช่อง",rules:[function(t){return"ยกเลิก"==t}],"hide-details":""}})],1),t._v(" "),r("v-btn",{attrs:{color:"error",large:""},on:{click:t.clickCancelPayment}},[r("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                    ยกเลิกรายการ\n                ")],1),t._v(" "),r("v-btn",{attrs:{color:"primary",large:""},on:{click:function(e){t.dialog=!1}}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                    ออก\n                ")],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports,setStautsColorText:V},data:function(){return{headers:[{text:"เลขที่ใบเสร็จ",value:"bill_id"},{text:"จำนวนเงิน",value:"amount"},{text:"ช่องทางชำระเงิน",value:"order_payment_method_id",align:"center"},{text:"วัน-เวลาทำรายการ",value:"updated_at",align:"center"},{text:"สถานะ",value:"status",align:"center"},{text:"การจัดการ",value:"action",align:"end"}]}}},G=Object(n.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-data-table",{attrs:{headers:t.headers,items:t.payments,"hide-default-footer":"","items-per-page":50},scopedSlots:t._u([{key:"item.order_payment_method_id",fn:function(e){var r=e.item;return[t._v(t._s(r.order_payment_method.name))]}},{key:"item.status",fn:function(t){var e=t.item;return[r("setStautsColorText",{attrs:{status:e.status}})]}},{key:"item.action",fn:function(t){var e=t.item;return[r("cancelPayment",{attrs:{payment:e}})]}}])})],1)}),[],!1,null,null,null).exports,L={data:function(){return{alertSMS:!0}},methods:{emitAlertSMS:function(t){var e={sms:t};this.$emit("emitAlert",e)}}};function W(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var J={components:{formAlertSms:Object(n.a)(L,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-checkbox",{attrs:{label:"แจ้งผ่านข้อความ"},on:{change:function(e){return t.emitAlertSMS(t.alertSMS)}},model:{value:t.alertSMS,callback:function(e){t.alertSMS=e},expression:"alertSMS"}})}),[],!1,null,null,null).exports,overlay:m.a},data:function(){return{dialog:!1,overlay:!1,form:{order_id:this.$store.getters["order/getByID"].data.id,alertSMS:!0}}},methods:{clickSubmit:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.overlay=!0,t.next=3,e.$store.dispatch("payment/notPayDeposit",e.form);case 3:return r=t.sent,t.next=6,e.$store.dispatch("order/getByID",e.$store.getters["order/getByID"].data.id);case 6:200==r.status?(e.dialog=!1,e.$toast.success("เปลี่ยนสถานะ : ไม่ชำระมัดจำ")):e.$toast.error("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้งภายหลัง"),e.overlay=!1;case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){W(s,a,o,n,i,"next",t)}function i(t){W(s,a,o,n,i,"throw",t)}n(void 0)}))})()},emitAlert:function(t){this.form.alertSMS=t.sms}}},X={props:["count"],components:{alertPayment:$,acceptPayment:q,tablePayment:G,tablePaymentVerify:N,notPayDeposit:Object(n.a)(J,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"cyan"}},a),[t._v("\n                ไม่ชำระมัดจำ\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                ไม่ชำระมัดจำ\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("v-alert",{attrs:{type:"error"}},[t._v("\n                    คุณต้องการแจ้งลูกค้า ไม่ชำระมัดจำใช่หรือไม่ ?\n                ")]),t._v(" "),r("formAlertSms",{on:{emitAlert:t.emitAlert}}),t._v(" "),r("v-btn",{staticClass:"error",on:{click:t.clickSubmit}},[r("v-icon",{attrs:{left:""}},[t._v("gavel")]),t._v("\n                    ยืนยัน")],1),t._v(" "),r("v-btn",{staticClass:"primary"},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                    ออก")],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports},data:function(){return{dialog:!1}}};function K(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var Y={props:["order","count"],components:{formDetail:b,MainPayment:Object(n.a)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-list-item",t._g({staticClass:"yellow darken-1"},a),[r("v-list-item-icon",[r("v-badge",{attrs:{color:"primary",dot:"",value:t.count.slipNotVerifyOnly}},[r("v-icon",{staticClass:"black--text"},[t._v("attach_money")])],1)],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{staticClass:"black--text"},[t._v("\n                        การชำระเงิน\n                    ")])],1)],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-title",[t._v("\n                การชำระเงิน\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[0!=this.$store.getters["order/getByID"].sum.balance?r("v-row",{staticClass:"px-4 mb-4"},[r("acceptPayment",{staticClass:"mr-2",attrs:{sum:this.$store.getters["order/getByID"].sum}}),t._v(" "),this.$store.getters["order/getByID"].count.slipNotVerify?r("tablePaymentVerify",{staticClass:"mr-2",attrs:{slips:this.$store.getters["order/getByID"].data.slip_not_verify}}):t._e(),t._v(" "),r("alertPayment",{staticClass:"mr-2"}),t._v(" "),2==this.$store.getters["order/getByID"].data.order_status_id||3==this.$store.getters["order/getByID"].data.order_status_id?r("notPayDeposit"):t._e()],1):t._e(),t._v(" "),r("tablePayment",{attrs:{payments:this.$store.getters["order/getByID"].data.order_payment}})],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{dialog:!1,buttons:[],action:{create:{detail:{method:"create",title:"เพิ่มสินค้าใหม่",icon:"add_shopping_cart"}}}}},methods:{emitDialogOff:function(){this.$emit("emitDialogOff")},testFacebook:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("order/createOrder");case 2:t.sent;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){K(s,a,o,n,i,"next",t)}function i(t){K(s,a,o,n,i,"throw",t)}n(void 0)}))})()},start:function(){this.setButtonByStatus()},setButtonByStatus:function(){switch(this.order.order_status.id){case 4:this.buttons=[{color:"warning",text:"เตรียมสินค้าแล้ว",status:6}];break;case 6:this.buttons=[{color:"warning",text:"กำลังจัดส่งสินค้า",status:6},{color:"success",text:"รับสินค้าแล้ว",status:8}];break;case 1:this.button={color:"info",text:"เตรียมสินค้าแล้ว",status:6}}}}},Z=Object(n.a)(Y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"mb-3"},[r("v-card-title",[t._v("\n            การจัดการ\n            "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:t.emitDialogOff}},[t._v("close")])],1)],1),t._v(" "),r("v-list-item-group",{staticClass:"py-0"},[r("formDetail",{attrs:{order:t.order,action:t.action.create.detail}}),t._v(" "),r("MainPayment",{directives:[{name:"show",rawName:"v-show",value:t.order.order_status.id>1,expression:"order.order_status.id > 1"}],attrs:{count:t.count}}),t._v(" "),r("v-list-item",{directives:[{name:"show",rawName:"v-show",value:8!=t.order.order_status.id,expression:"order.order_status.id != 8"}],staticClass:"error"},[r("v-list-item-icon",[r("v-icon",[t._v("cancel")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("ยกเลิกรายการสั่งซื้อ")])],1)],1),t._v(" "),r("v-list-item",{staticClass:"red accent-4 mt-4",attrs:{dark:""},on:{click:t.emitDialogOff}},[r("v-list-item-icon",[r("v-icon",[t._v("exit_to_app")])],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",[t._v("ออก")])],1)],1)],1),t._v(" "),r("hr"),t._v(" "),r("hr"),t._v(" "),r("v-btn",{attrs:{block:"",color:"info",large:""}},[t._v("อัปโหลดภาพ")]),t._v(" "),r("hr",{staticClass:"my-2"}),t._v(" "),r("v-btn",{staticClass:"mb-2",attrs:{block:"",color:"info",large:""}},[t._v("ข้อมูลผู้ส่งซื้อ")]),t._v(" "),r("v-btn",{attrs:{block:"",color:"info",large:""}},[t._v("วัน-เวลาที่รับสินค้า")]),t._v(" "),r("hr",{staticClass:"my-2"}),t._v(" "),t._l(t.buttons,(function(e){var a=e.index,o=e.color,s=e.status,n=e.text;return r("div",{key:a},[r("v-btn",{staticClass:"mb-2",attrs:{block:"",large:"",color:o},on:{click:function(e){return t.clickUpdateStatus(s)}}},[t._v(t._s(n))])],1)})),t._v(" "),1!=t.order.order_status.id?r("v-btn",{attrs:{block:"",color:"error",large:""}},[t._v("ยกเลิก")]):t._e()],2)}),[],!1,null,null,null).exports,tt={props:["src"]},et={props:["detail"],components:{imageThumbnail:Object(n.a)(tt,(function(){var t=this.$createElement;return(this._self._c||t)("v-img",{attrs:{src:"https://drive.google.com/thumbnail?id="+this.src.src_name}})}),[],!1,null,null,null).exports}},rt=Object(n.a)(et,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"4"}},[r("imageThumbnail",{attrs:{src:t.detail.product.product_image}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",{staticClass:"px-4"},[r("span",{staticClass:"title font-weight-bold"},[t._v(t._s(t.detail.product.name))]),t._v(" "),r("v-spacer"),t._v(" "),r("span",{staticClass:"title font-weight-bold"},[t._v("X"+t._s(t.detail.quantity))])],1),t._v(" "),t._l(t.detail.product.product_tag_use_only,(function(e){return r("p",{key:e.id,staticClass:"mb-0"},[t._v("\n            "+t._s(e.product_category_sub_use_only.product_category.name)+"\n            :\n            "+t._s(e.product_category_sub_use_only.name)+"\n        ")])})),t._v(" "),t.detail.write_status?r("p",{staticClass:"mb-0"},[t._v("\n            เขียนข้อความ : "+t._s(t.detail.write)+"\n        ")]):t._e(),t._v(" "),t.detail.note_status?r("p",{staticClass:"mb-0"},[t._v("\n            หมายเหตุ : "+t._s(t.detail.note)+"\n        ")]):t._e(),t._v(" "),r("v-divider",{staticClass:"my-2"}),t._v(" "),r("p",{staticClass:"mb-0"},[t._v("ราคา/หน่วย "+t._s(t.detail.price)+" บาท")]),t._v(" "),r("p",{staticClass:"mb-0"},[t._v("รวมราคา "+t._s(t.detail.sum_price)+" บาท")])],2)],1)}),[],!1,null,null,null).exports;function at(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var ot={props:["detail","action"],components:{productDetail:rt,overlay:m.a},data:function(){return{dialog:!1,confirmText:"",overlay:!1,response:{},main:{titleText:"",vAlert:{type:"",text:""},labelConfirm:"",rules:{textComfirm:"",alert:""},buttonSubmit:{submit:{text:"",color:"",icon:""},cancel:{text:"",color:"",icon:""}}}}},methods:{start:function(){this.confirmText="","delete"==this.action.method?this.main={titleText:"ยกเลิกสินค้า",vAlert:{type:"warning",text:"คุณต้องการยกเลิกสินค้านี้ใช่ไหม ?"},labelConfirm:"โปรดกรอกคำว่า 'ยกเลิก' ลงช่องนี้",rules:{textComfirm:"ยกเลิก",textAlert:"โปรดกรอกคำว่า 'ยกเลิก' เท่านั้น"},buttonSubmit:{submit:{text:"ยกเลิกสินค้า",color:"error",icon:"cancel"},cancel:{text:"ออก",color:"info",icon:"exit_to_app"}}}:"redelete"==this.action.method&&(this.main={titleText:"เรียกสินค้า",vAlert:{type:"info",text:"คุณต้องการเรียกคืนสินค้านี้ใช่ไหม ?"},labelConfirm:"โปรดกรอกคำว่า 'เรียกคืน' ลงช่องนี้",rules:{textComfirm:"เรียกคืน",textAlert:"โปรดกรอกคำว่า 'เรียกคืน' เท่านั้น"},buttonSubmit:{submit:{text:"เรียกคืนสินค้า",color:"success",icon:"save"},cancel:{text:"ออก",color:"error",icon:"exit_to_app"}}})},clickSubmit:function(){var t,e=this;return(t=o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=18;break}if(e.overlay=!0,r={detail_id:e.detail.id,order_id:e.detail.order_id},"ยกเลิก"!=e.confirmText){t.next=9;break}return t.next=6,e.$store.dispatch("orderDetail/delete",r);case 6:e.response=t.sent,t.next=13;break;case 9:if("เรียกคืน"!=e.confirmText){t.next=13;break}return t.next=12,e.$store.dispatch("orderDetail/redelete",r);case 12:e.response=t.sent;case 13:return t.next=15,e.$store.dispatch("order/getByID",e.detail.order_id);case 15:200==e.response.status?(e.$toast.success("ทำรายการสำเร็จ"),e.overlay=!1,e.dialog=!1):(e.$toast.error("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้งภายหลัง"),e.overlay=!1),t.next=20;break;case 18:e.$toast.warning("กรุณากรอกข้อมูลให้ถูกต้อง"),e.overlay=!1;case 20:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){at(s,a,o,n,i,"next",t)}function i(t){at(s,a,o,n,i,"throw",t)}n(void 0)}))})()}}},st=Object(n.a)(ot,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{persistent:"",width:"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({staticClass:"mr-2 d-none d-sm-flex",attrs:{color:t.action.buttonHead.color},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.action.buttonHead.icon))]),t._v("\n                "+t._s(t.action.buttonHead.text)+"\n            ")],1),t._v(" "),r("v-btn",t._g({staticClass:"mr-2 d-flex d-sm-none",attrs:{color:t.action.buttonHead.iconcolor,fab:"",small:""},on:{click:t.start}},a),[r("v-icon",[t._v(t._s(t.action.buttonHead.icon))])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                "+t._s(t.main.titleText)+"\n                "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-card-text",[r("productDetail",{attrs:{detail:t.detail}}),t._v(" "),r("v-alert",{attrs:{type:t.main.vAlert.type}},[t._v(t._s(t.main.vAlert.text))]),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("v-text-field",{staticClass:"mb-0",attrs:{outlined:"",label:t.main.labelConfirm,autocomplete:"false",rules:[function(t){return!!t||"ห้ามเว้นว่าง"},function(e){return e==t.main.rules.textComfirm||t.main.rules.textAlert}]},model:{value:t.confirmText,callback:function(e){t.confirmText=e},expression:"confirmText"}})],1),t._v(" "),r("v-btn",{class:t.main.buttonSubmit.submit.color,on:{click:t.clickSubmit}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.main.buttonSubmit.submit.icon))]),t._v("\n                    "+t._s(t.main.buttonSubmit.submit.text))],1),t._v(" "),r("v-btn",{class:t.main.buttonSubmit.cancel.color,on:{click:function(e){t.dialog=!1}}},[r("v-icon",{attrs:{left:""}},[t._v(t._s(t.main.buttonSubmit.cancel.icon))]),t._v("\n                    "+t._s(t.main.buttonSubmit.cancel.text))],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports;function nt(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}var it={props:["detail"],components:{overlay:m.a},data:function(){return{dialog:!1,overlay:!1,form:{example:!1,image:!1}}},methods:{clickSubmit:function(){var t,e=this;return(t=o.a.mark((function t(){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.form.example||0!=e.form.image){t.next=4;break}e.$toast.error("ไม่สามารถส่งลิงก์ได้ กรุณาตรวจสอบข้อมูล"),t.next=10;break;case 4:return e.overlay=!0,r={detail_id:e.detail.id,form:e.form},t.next=8,e.$store.dispatch("orderDetail/sentLinkForUploadImage",r);case 8:200===(a=t.sent).status?(!0===a.data.success?(e.$toast.success(a.data.message),e.dialog=!1):e.$toast.error(a.data.message),e.overlay=!1):a.status;case 10:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){nt(s,a,o,n,i,"next",t)}function i(t){nt(s,a,o,n,i,"throw",t)}n(void 0)}))})()}}},ct={props:["detail"],components:{formDetail:b,deleteDetail:st,sentLinkForUploadImage:Object(n.a)(it,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{persistent:"",width:"300"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({staticClass:"mr-2",attrs:{color:"primary"}},a),[r("v-icon",{attrs:{left:""}},[t._v("link")]),t._v("\n            ส่งลิงก์อัปโหลดรูป\n            ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n            ส่งลิงก์อัปโหลดรูป\n            "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-card-text",[r("v-checkbox",{staticClass:"mt-4",attrs:{label:"รูปภาพตัวอย่างสินค้า","hide-details":""},model:{value:t.form.example,callback:function(e){t.$set(t.form,"example",e)},expression:"form.example"}}),t._v(" "),r("v-checkbox",{staticClass:"mt-4",attrs:{label:"รูปภาพสินค้า","hide-details":""},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),t._v(" "),r("v-row",{staticClass:"mt-4 px-4"},[r("v-btn",{staticClass:"mr-2",attrs:{color:"success",disabled:0==t.form.example&&0==t.form.image},on:{click:t.clickSubmit}},[r("v-icon",{attrs:{left:""}},[t._v("link")]),t._v("\n                    ส่งลิงก์")],1),t._v(" "),r("v-btn",{attrs:{color:"error"}},[r("v-icon",{attrs:{left:""}},[t._v("exit_to_app")]),t._v("\n                    ออก\n                ")],1)],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)}),[],!1,null,null,null).exports},data:function(){return{action:{update:{detail:{method:"update",title:"แก้ไขสินค้า",icon:"edit"}},delete:{method:"delete",buttonHead:{icon:"cancel",color:"error",text:"ยกเลิกสินค้า"}},redelete:{method:"redelete",buttonHead:{color:"info",icon:"refresh",text:"เรียกคืนสินค้า"}}}}}},lt={props:["details","count","detailsNo","countNo"],components:{productDetail:rt,buttonForAction:Object(n.a)(ct,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.detail.status?r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",[r("formDetail",{attrs:{detail:t.detail,action:t.action.update.detail}}),t._v(" "),t.detail.upload_image_status?r("sentLinkForUploadImage",{attrs:{detail:t.detail}}):t._e(),t._v(" "),r("deleteDetail",{attrs:{detail:t.detail,action:t.action.delete}})],1)],1):r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-row",[r("deleteDetail",{attrs:{detail:t.detail,action:t.action.redelete}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{}},methods:{start:function(){this.$emit("emitStart")}}},ut=Object(n.a)(lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",[r("v-card-title",[t._v("\n            รายละเอียด\n            "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"success"},on:{click:t.start}},[t._v("refresh")])],1),t._v(" "),r("v-divider",{staticClass:"ma-1"})],1),t._v(" "),t.count>0?r("div",t._l(t.details,(function(e){return r("v-card",{key:e.id,staticClass:"mt-4"},[r("v-card-text",{staticClass:"pa-0"},[r("v-container",{staticClass:"py-0"},[r("productDetail",{attrs:{detail:e}}),t._v(" "),r("buttonForAction",{attrs:{detail:e}}),t._v(" "),t._e()],1)],1)],1)})),1):r("v-alert",{attrs:{type:"info"}},[t._v("\n        ยังไม่มีสินค้า\n    ")]),t._v(" "),t.countNo>0?r("div",t._l(t.detailsNo,(function(e){return r("v-card",{key:e.id,staticClass:"mt-4"},[r("v-card-text",{staticClass:"pa-0"},[r("v-container",{staticClass:"py-0"},[r("productDetail",{attrs:{detail:e}}),t._v(" "),r("buttonForAction",{attrs:{detail:e}}),t._v(" "),t._e()],1)],1)],1)})),1):t._e()],1)}),[],!1,null,null,null).exports,dt={props:["sum"],components:{CostSub:x.a}},vt=Object(n.a)(dt,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",[e("v-card-title",[this._v("\n        ค่าใช้จ่าย\n    ")]),this._v(" "),e("v-divider",{staticClass:"ma-1"}),this._v(" "),e("v-card-text",{staticClass:"pt-0"},[e("CostSub",{attrs:{sum:this.sum}})],1)],1)}),[],!1,null,null,null).exports,mt={props:["order"]},ft={props:["order"],components:{OrderDetail:Object(n.a)(mt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"12"}},[r("b",[t._v("ชื่อลูกค้า")]),t._v(" "),r("v-spacer"),t._v("\n        "+t._s(t.order.customer.name)+"\n    ")],1),t._v(" "),r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"12"}},[r("b",[t._v("เบอร์โทรศัพท์")]),t._v(" "),r("v-spacer"),t._v("\n        "+t._s(t.order.customer.phone)+"\n    ")],1),t._v(" "),r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"12"}},[r("b",[t._v("วัน-เวลารับสินค้า")]),t._v(" "),r("v-spacer"),t._v("\n        "+t._s(t.order.dateTime_get)+"\n    ")],1),t._v(" "),r("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"12"}},[r("b",[t._v("สถานะ")]),t._v(" "),r("v-spacer"),t._v(" "),r("span",[t._v(t._s(t.order.order_status.name))])],1)],1)}),[],!1,null,null,null).exports}},_t=Object(n.a)(ft,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",[e("v-card-title",[this._v("\n        รายการสั่งซื้อ\n        "),e("v-spacer"),this._v("\n        #"+this._s(this.$store.getters["order/getByID"].data.id)+"0582\n    ")],1),this._v(" "),e("v-divider",{staticClass:"ma-1"}),this._v(" "),e("v-card-text",{staticClass:"px-0 pt-0"},[e("v-container",{staticClass:"py-0"},[e("OrderDetail",{attrs:{order:this.$store.getters["order/getByID"].data}})],1)],1)],1)}),[],!1,null,null,null).exports;function pt(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function ht(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){pt(s,a,o,n,i,"next",t)}function i(t){pt(s,a,o,n,i,"throw",t)}n(void 0)}))}}var gt={props:["order"],components:{OrderMenuForManages:Z,OrderShow:ut,overlay:m.a,OrderDetailHead:_t,OrderCostMain:vt},data:function(){return{dialog:!1,overlay:!1,data:[]}},methods:{start:function(){var t=this;return ht(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("order/getByID",t.order.id);case 3:t.overlay=!1;case 4:case"end":return e.stop()}}),e)})))()},emitStart:function(t){this.start()},emitDialogOff:function(){var t=this;return ht(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$emit("emitDialogTableFalse"),t.dialog=!1;case 2:case"end":return e.stop()}}),e)})))()}}},yt={props:["dataTable","headers"],components:{OrderManages:Object(n.a)(gt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{fullscreen:"",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{block:"",color:"primary"},on:{click:t.start}},a),[r("v-badge",{attrs:{color:"warning",dot:"",value:t.order.slip_not_verify_only.length}},[t._v("\n                    การจัดการ\n                ")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",{attrs:{color:"#121212"}},[r("v-card-text",{staticClass:"px-4"},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"3"}},[r("OrderDetailHead",{staticClass:"mb-4",attrs:{order:this.$store.getters["order/getByID"].data}}),t._v(" "),r("OrderCostMain",{attrs:{sum:this.$store.getters["order/getByID"].sum}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("OrderShow",{attrs:{details:this.$store.getters["order/getByID"].data.order_detail,count:this.$store.getters["order/getByID"].count.product.use,detailsNo:this.$store.getters["order/getByID"].data.order_detail_no_use,countNo:this.$store.getters["order/getByID"].count.product.nouse},on:{emitStart:t.emitStart}})],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"3"}},[r("OrderMenuForManages",{attrs:{order:this.$store.getters["order/getByID"].data,count:this.$store.getters["order/getByID"].count},on:{emitDialogOff:t.emitDialogOff}})],1)],1)],1)],1),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)],1)}),[],!1,null,null,null).exports,BadgesOrderManages:{content:"",value:"",color:""}},methods:{emitDialogTableFalse:function(){this.$emit("emitDialogTableFalse")},setBadgesOrderManages:function(){this.$store.getters["order/getByID"].cpunt.slipNotVerify&&(this.BadgesOrderManages={content:this.$store.getters["order/getByID"].cpunt.slipNotVerify,value:this.$store.getters["order/getByID"].cpunt.slipNotVerify,color:"warning"})}}},bt=Object(n.a)(yt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-data-table",{attrs:{items:t.dataTable,headers:t.headers,"hide-default-footer":"","item-key":"id"},scopedSlots:t._u([{key:"item.id",fn:function(e){var r=e.item;return[t._v(" #"+t._s(r.id)+" ")]}},{key:"item.customer_name",fn:function(e){var r=e.item;return[t._v("\n            "+t._s(r.customer.name)+"\n        ")]}},{key:"item.customer_phone",fn:function(e){var r=e.item;return[t._v("\n            "+t._s(r.customer.phone)+"\n        ")]}},{key:"item.channel_of_purchase_id",fn:function(e){var r=e.item;return[t._v("\n            "+t._s(r.channel_of_purchase.name)+"\n        ")]}},{key:"item.order_status_id",fn:function(e){var a=e.item;return[r("v-btn",{class:a.order_status.style,attrs:{block:"",small:""}},[t._v(t._s(a.order_status.name))])]}},{key:"item.action",fn:function(e){var a=e.item;return[r("OrderManages",{attrs:{order:a},on:{emitDialogTableFalse:t.emitDialogTableFalse}})]}}])})],1)}),[],!1,null,null,null).exports,xt={components:{CustomerManage:r(12).default},data:function(){return{dialog:!1,selectCustomer:!0}},methods:{onCustomer:function(t){this.dialog=!1,this.$emit("onCustomer",t)}}},kt={props:["order","headers"],components:{OrderTable:bt},data:function(){return{dialog:!1}}};function wt(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function $t(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){wt(s,a,o,n,i,"next",t)}function i(t){wt(s,a,o,n,i,"throw",t)}n(void 0)}))}}var Ct={props:["headers"],components:{selectCustomer:Object(n.a)(xt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{dark:"","x-small":"",fab:"",color:"orange",depressed:""}},a),[r("v-icon",[t._v("search")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-text",[r("CustomerManage",{attrs:{selectCustomer:t.selectCustomer},on:{onCustomer:t.onCustomer}})],1)],1)],1)],1)}),[],!1,null,null,null).exports,OrderListsForchecked:Object(n.a)(kt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"80%"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("span",t._g({},a),[t._v("มีรายการสั่งซื้ออื่น จำนวน "+t._s(t.order.counts)+" รายการ\n                "),r("b",[r("u",[t._v("รายละเอียด")])])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-text",[r("OrderTable",{attrs:{dataTable:t.order.data,headers:t.headers}})],1)],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!1,dialog:!1,reply:{order:{counts:0,data:{}}},form:{customer:{id:"",name:"",phone:""},date:"",time:""},formDefalut:{customer:{id:"",name:"",phone:""},date:"",time:""},formData:{customer_id:"",dateTime_get:"",channel_of_purchase_id:""},channel_of_purchases:[],timeGets:[],Rules:{customer_id:[function(t){return!!t}],dateTime_get:[function(t){return!!t}],channel_of_purchase_id:[function(t){return!!t}]},dateTimeStatus:!1}},methods:{setColorDatetime:function(t,e){return t&&1==e?"success":"warning"},setColorCustomer:function(t){return t?"success":"warning"},setColorChannelOfPurchase:function(t){return t?"success":"warning"},onCustomer:function(t){this.form.customer={id:t.id,name:t.name,phone:t.phone},this.formData.customer_id=t.id},changeDateTime:function(t,e){var r=this;return $t(o.a.mark((function a(){var s,n,i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t||!e){a.next=8;break}return r.dateTimeStatus=!1,r.overlay=!0,s=t+" "+e,a.next=6,r.$store.dispatch("order/checkDateTimeForGet",s);case 6:200==(n=a.sent).status?(i=n.data.data,r.dateTimeStatus=!0,r.formData.dateTime_get=i.dateTime_get,r.reply.order=i.orders,r.$toast.success(n.data.message),r.overlay=!1):400==n.status?(r.formData.dateTime_get="",r.$toast.error(n.data.message),r.overlay=!1):(r.$toast.error("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้ง"),r.overlay=!1);case 8:case"end":return a.stop()}}),a)})))()},start:function(){var t=this;return $t(o.a.mark((function e(){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,t.reset(),e.next=4,t.$store.dispatch("channelOfPurchase/UseOnly");case 4:return r=e.sent,t.channel_of_purchases=r.data,e.next=8,t.$store.dispatch("order/timeGets");case 8:a=e.sent,t.timeGets=a,t.overlay=!1;case 11:case"end":return e.stop()}}),e)})))()},dateTime:function(){this.form.date=(new Date).toJSON().slice(0,10).replace(/-/g,"-")},reset:function(){this.form={customer:{id:"",name:"",phone:""},date:"",time:""},this.dateTime(),this.formData={customer_id:"",dateTime_get:"",channel_of_purchase_id:""}},save:function(){var t=this;return $t(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=13;break}return t.overlay=!0,e.next=4,t.$store.dispatch("order/createOrder",t.formData);case 4:if(200!=e.sent.status){e.next=11;break}return e.next=8,t.$emit("OnDataTable");case 8:t.$toast.success("สร้างรายการใหม่สำเร็จ"),t.dialog=!1,t.overlay=!1;case 11:e.next=14;break;case 13:t.$toast.warning("กรุณาตรวจสอบ กรอกข้อมูลไม่ครบถ้วน");case 14:case"end":return e.stop()}}),e)})))()}}};function St(t,e,r,a,o,s,n){try{var i=t[s](n),c=i.value}catch(t){return void r(t)}i.done?e(c):Promise.resolve(c).then(a,o)}function Dt(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var s=t.apply(e,r);function n(t){St(s,a,o,n,i,"next",t)}function i(t){St(s,a,o,n,i,"throw",t)}n(void 0)}))}}var Pt={components:{OrderTable:bt,OrderCreate:Object(n.a)(Ct,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"600",persistent:"","background-color":"grey lighten-2"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"orange",dark:""},on:{click:t.start}},a),[r("v-icon",{attrs:{left:""}},[t._v("add")]),t._v("\n                รายการใหม่\n            ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[t._v("สร้างรายการสั่งซื้อใหม่")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{attrs:{outlined:""}},[r("v-card-title",{staticClass:"pb-0"},[r("span",[t._v("ข้อมูลลูกค้า")]),t._v(" "),r("v-spacer"),t._v(" "),r("selectCustomer",{on:{onCustomer:t.onCustomer}})],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"py-0"},[r("v-text-field",{attrs:{label:"ชื่อ",readonly:"",filled:"",placeholder:"กรุณาเลือกลูกค้า"},model:{value:t.form.customer.name,callback:function(e){t.$set(t.form.customer,"name",e)},expression:"form.customer.name"}}),t._v(" "),r("v-text-field",{attrs:{label:"เบอร์โทร",readonly:"",filled:"",placeholder:"กรุณาเลือกลูกค้า"},model:{value:t.form.customer.phone,callback:function(e){t.$set(t.form.customer,"phone",e)},expression:"form.customer.phone"}})],1)],1)],1),t._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",{attrs:{outlined:""}},[r("v-card-title",{staticClass:"pb-0"},[r("span",[t._v("วัน-เวลารับสินค้า")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"orange","x-small":"",fab:"",depressed:"",dark:""}},[r("v-icon",[t._v("event_note")])],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-text",{staticClass:"py-0"},[r("v-text-field",{attrs:{label:"วัน/เดือน/ปี",type:"date",filled:"",placeholder:"กรุณาเลือกลูกค้า"},on:{change:function(e){return t.changeDateTime(t.form.date,t.form.time)}},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}}),t._v(" "),r("v-select",{attrs:{items:t.timeGets,label:"เวลา",filled:""},on:{change:function(e){return t.changeDateTime(t.form.date,t.form.time)}},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1)],1)],1),t._v(" "),r("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[r("v-card",[r("v-card-title",{staticClass:"pb-0"},[r("span",[t._v("ช่องทางการสั่งซื้อ")])]),t._v(" "),r("v-divider"),t._v(" "),r("v-chip-group",{staticClass:"px-4 pb-3",attrs:{column:"","active-class":"success text--accent-4"},model:{value:t.formData.channel_of_purchase_id,callback:function(e){t.$set(t.formData,"channel_of_purchase_id",e)},expression:"formData.channel_of_purchase_id"}},t._l(t.channel_of_purchases,(function(e){var a=e.id,o=e.name;return r("v-chip",{key:a,attrs:{filter:"",value:a}},[t._v("\n                                    "+t._s(o))])})),1)],1)],1)],1),t._v(" "),r("v-alert",{staticClass:"mb-1",attrs:{dense:"",text:"",type:t.setColorCustomer(t.formData.customer_id)}},[t._v("\n                    ข้อมูลลูกค้า\n                ")]),t._v(" "),r("v-alert",{staticClass:"mb-1",attrs:{dense:"",text:"",type:t.setColorDatetime(t.formData.dateTime_get,t.dateTimeStatus)}},[t._v("\n                    วัน-เวลารับสินค้า\n                ")]),t._v(" "),r("v-alert",{staticClass:"mb-1",attrs:{dense:"",text:"",type:t.setColorChannelOfPurchase(t.formData.channel_of_purchase_id)}},[t._v("\n                    ช่องทางการสั่งซื้อ\n                ")]),t._v(" "),r("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.reply.order.counts>0,expression:"reply.order.counts > 0"}],staticClass:"mb-1",attrs:{dense:"",text:"",type:"warning"}},[r("OrderListsForchecked",{attrs:{order:t.reply.order,headers:t.headers}})],1),t._v(" "),r("v-form",{ref:"form",attrs:{"lazy-validation":""}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"1 == 0"}]},[r("v-text-field",{attrs:{label:"customer_id",readonly:"",rules:t.Rules.customer_id},model:{value:t.formData.customer_id,callback:function(e){t.$set(t.formData,"customer_id",e)},expression:"formData.customer_id"}}),t._v(" "),r("v-text-field",{attrs:{label:"channel_of_purchase_id",readonly:"",rules:t.Rules.channel_of_purchase_id},model:{value:t.formData.channel_of_purchase_id,callback:function(e){t.$set(t.formData,"channel_of_purchase_id",e)},expression:"formData.channel_of_purchase_id"}}),t._v(" "),r("v-text-field",{attrs:{label:"dateTime_get",readonly:"",rules:t.Rules.dateTime_get},model:{value:t.formData.dateTime_get,callback:function(e){t.$set(t.formData,"dateTime_get",e)},expression:"formData.dateTime_get"}})],1)])],1),t._v(" "),r("v-divider",{staticClass:"ma-0"}),t._v(" "),r("v-card-actions",[r("v-container",{staticClass:"text-right"},[r("v-btn",{attrs:{color:"success"},on:{click:t.save}},[r("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                        สร้างรายการสั่งซื้อใหม่")],1),t._v(" "),r("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[r("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n                        ล้างข้อมูล")],1)],1)],1)],1),t._v(" "),r("v-overlay",{attrs:{value:t.overlay}},[r("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports,snackbarRight:r(9).a,overlay:m.a},data:function(){return{dataTable:[],snackbar:{status:!1},selected_table:"today",overlay:!1,counts:{today:0,notify:0,tomorrow:0,created:0},orders:{today:{},notify:{},created:{}},headers:[{text:"Order.",value:"id"},{text:"ชื่อลูกค้า",value:"customer_name"},{text:"เบอร์โทรลูกค้า",value:"customer_phone"},{text:"วัน-เวลาที่รับ",value:"dateTime_get"},{text:"สถานะ",value:"order_status_id",align:"center"},{text:"การจัดการ",value:"action",align:"end"}],dataSelect:[]}},methods:{emitDialogTableFalse:function(){this.reload()},clickOrderSelect:function(t){"today"==t?this.dataTable=this.orders.today:"notify"==t?this.dataTable=this.orders.notify:"created"==t?this.dataTable=this.orders.created:"tomorrow"==t?this.dataTable=this.orders.tomorrow:""==t||(this.snackbar={status:!0,text:"กรุณาลองใหม่อีกครั้งค่ะ",color:"error"}),this.selected_table=t},OnDataTable:function(){this.reload()},reload:function(){var t=this;return Dt(o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,t.dataTable=[],e.next=4,t.$store.dispatch("order/all");case 4:return e.next=6,t.$store.getters["order/all"];case 6:r=e.sent,t.orders={today:r.todayOrder,notify:r.notifyOrder,created:r.createdOrder,tomorrow:r.tomorrowOrder},t.dataTable=t.orders.today,t.dataSelect=r.menus,t.clickOrderSelect(t.selected_table),t.overlay=!1;case 12:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Dt(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.reload();case 1:case"end":return e.stop()}}),e)})))()}},Ot=Object(n.a)(Pt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-item-group",{attrs:{mandatory:!0}},[r("v-row",t._l(t.dataSelect,(function(e){var a=e.text,o=e.count,s=e.textSmall,n=e.textBig,i=e.colorBlock,c=e.colorText;return r("v-col",{key:a,attrs:{cols:"6",md:"3"}},[r("div",{on:{click:function(e){return t.clickOrderSelect(a)}}},[r("v-item",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.active,l=e.toggle;return[r("v-card",{attrs:{shaped:"",color:a?i:""},on:{click:l}},[r("v-card-text",[r("p",{staticClass:"display-2 font-weight-black mb-2",class:a?c:""},[t._v("\n                                    "+t._s(o)+"\n                                ")]),t._v(" "),r("p",{staticClass:"subtitle-1 ma-0 d-none d-sm-flex",class:a?c:""},[t._v("\n                                    "+t._s(n)+"\n                                ")]),t._v(" "),r("p",{staticClass:"subtitle-1 ma-0 d-flex d-sm-none",class:a?c:""},[t._v("\n                                    "+t._s(s)+"\n                                ")])])],1)]}}],null,!0)})],1)])})),1)],1),t._v(" "),r("v-container",[r("v-row",[r("OrderCreate",{staticClass:"mr-2",attrs:{headers:t.headers},on:{OnDataTable:t.OnDataTable}}),t._v(" "),r("v-btn",{staticClass:"info",attrs:{fab:"","x-small":""},on:{click:t.reload}},[r("v-icon",[t._v("refresh")])],1)],1)],1),t._v(" "),r("OrderTable",{attrs:{dataTable:t.dataTable,headers:t.headers},on:{emitDialogTableFalse:t.emitDialogTableFalse}}),t._v(" "),r("snackbarRight",{attrs:{snackbar:t.snackbar}}),t._v(" "),r("overlay",{attrs:{overlay:t.overlay}})],1)}),[],!1,null,null,null);e.default=Ot.exports},4:function(t,e,r){"use strict";var a={props:["sum"]},o=r(1),s=Object(o.a)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-row",[r("v-col",{attrs:{cols:"6",md:"6",sm:"6"}},[t._v("ยอดรวมทั้งหมด")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6",sm:"6"}},[t._v(t._s(t.sum.total)+" บาท")])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("ยอดชำระแล้ว")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.sum.deposit)+" บาท")])],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"6",md:"6"}},[t._v("ยอดคงเหลือ")]),t._v(" "),r("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.sum.balance)+" บาท")])],1)],1)}),[],!1,null,null,null);e.a=s.exports},9:function(t,e,r){"use strict";var a={props:["snackbar"]},o=r(1),s=Object(o.a)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-snackbar",{attrs:{color:t.snackbar.color,right:""},model:{value:t.snackbar.status,callback:function(e){t.$set(t.snackbar,"status",e)},expression:"snackbar.status"}},[t._v(t._s(t.snackbar.text))])}),[],!1,null,null,null);e.a=s.exports}}]);