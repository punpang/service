(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{41:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a);function s(e,t,r,a,n,s,o){try{var i=e[s](o),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){s(o,a,n,i,c,"next",e)}function c(e){s(o,a,n,i,c,"throw",e)}i(void 0)}))}}var i={data:function(){return{response:{data:{success:!0}},previewExample:"",previewImages:[],form:{write:""}}},methods:{start:function(){var e=this;return o(n.a.mark((function t(){var r,a,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$loading.show(),e.token=e.$route.params.token,t.next=4,axios.get("/api/v1/guest/order/"+e.token+"/uploadImageByToken");case 4:a=t.sent,s=a.data,e.response=s,e.form.write=s.data.order_detail.write,r.hide();case 9:case"end":return t.stop()}}),t)})))()},onFileChangeExample:function(e){var t=this;return o(n.a.mark((function e(){var r,a,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$loading.show(),a=event.target.files[0],(s=new FormData).append("image",a),e.next=6,axios.post("/api/v1/guest/order/"+t.token+"/uploadImageByToken/example",s);case 6:return o=e.sent,r.hide(),e.next=10,t.start();case 10:t.toast(o);case 11:case"end":return e.stop()}}),e)})))()},onFileChangeImages:function(e){var t=this;return o(n.a.mark((function r(){var a,s,o,i;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t.$loading.show(),s=event.target.files,o=new FormData,i=0;case 4:if(!(i<e.length)){r.next=12;break}return o.append("image",s[i]),r.next=8,axios.post("/api/v1/guest/order/"+t.token+"/uploadImageByToken/images",o);case 8:r.sent;case 9:i++,r.next=4;break;case 12:return a.hide(),r.next=15,t.start();case 15:t.toast(res),t.$refs.formInputImages.reset();case 17:case"end":return r.stop()}}),r)})))()},onFileChangeImagesV1:function(e){this.previewImages=[];for(var t=0;t<e.length;t++)this.previewImages.push(URL.createObjectURL(e[t]))},clickRemoveImage:function(e){var t=this;return o(n.a.mark((function r(){var a,s;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.$loading.show(),r.next=3,axios.delete("/api/v1/guest/order/"+t.token+"/uploadImageByToken/"+e+"/delete");case 3:return s=r.sent,a.hide(),r.next=7,t.start();case 7:t.toast(s);case 8:case"end":return r.stop()}}),r)})))()},clickSubmitUpdateWrite:function(){var e=this;return o(n.a.mark((function t(){var r,a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$loading.show(),t.next=3,axios.post("/api/v1/guest/order/"+e.token+"/updateWrite",e.form);case 3:return a=t.sent,r.hide(),t.next=7,e.start();case 7:e.toast(a);case 8:case"end":return t.stop()}}),t)})))()},toast:function(e){200===e.status?e.data.success?this.$toast.success(e.data.message):this.$toast.error(e.data.message):this.$toast.error("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง")}},mounted:function(){var e=this;return o(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.start();case 2:case"end":return t.stop()}}),t)})))()}},c=r(1),l=Object(c.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.response.success?r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-card-title",[e._v("รูปภาพต้นแบบสินค้า")]),e._v(" "),e.response.data.example?r("v-card-text",[e.response.data.example_image?r("v-img",{staticClass:"mb-4",attrs:{src:e.response.data.example_image.url}},[r("v-btn",{staticClass:"mt-4 ml-4",attrs:{color:"error"},on:{click:function(t){return e.clickRemoveImage(e.response.data.example_image.id)}}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                            ลบรูปนี้\n                        ")],1)],1):r("div",[r("v-file-input",{staticClass:"mb-4",attrs:{outlined:"","prepend-icon":"image",placeholder:"รูปภาพต้นแบบสินค้า",accept:"image/*","hide-details":"",rules:[function(e){return!!e}]},on:{change:e.onFileChangeExample}}),e._v(" "),r("v-alert",{attrs:{type:"info"}},[e._v("โปรดอัปโหลดรูป")])],1)],1):r("v-card-text",[r("v-alert",{attrs:{type:"warning"}},[e._v("คุณไม่มีสิทธิ์อัปโหลดส่วนนี้")])],1)],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-card",[r("v-card-title",[e._v("รูปสำหรับทำสินค้า")]),e._v(" "),r("v-card-text",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"9"}},[r("v-text-field",{attrs:{label:"เขียนข้อความ",outlined:"","hide-details":"","prepend-icon":"edit"},model:{value:e.form.write,callback:function(t){e.$set(e.form,"write",t)},expression:"form.write"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"3"}},[r("v-btn",{staticClass:"mt-2",attrs:{color:"success",block:"",disabled:e.form.write==e.response.data.order_detail.write||""==e.form.write},on:{click:e.clickSubmitUpdateWrite}},[r("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n                                บันทึก\n                            ")],1)],1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-form",{ref:"formInputImages"},[r("v-file-input",{staticClass:"mb-4",attrs:{multiple:"",outlined:"","prepend-icon":"image",placeholder:"เลือกรูปที่นี่",accept:"image/*","hide-details":""},on:{change:e.onFileChangeImages}})],1),e._v(" "),r("v-row",e._l(e.response.data.image,(function(t){return r("v-col",{key:t.id,attrs:{cols:"12",md:"12"}},[r("v-img",{attrs:{src:t.url}},[r("v-btn",{staticClass:"mt-2 ml-2",attrs:{color:"primary"},on:{click:function(r){return e.clickRemoveImage(t.id)}}},[r("v-icon",{attrs:{left:""}},[e._v("bookmark")]),e._v("\n                                    ตั้งเป็นรูปหลัก\n                                ")],1),e._v(" "),r("v-btn",{staticClass:"mt-2 ml-2",attrs:{color:"error"},on:{click:function(r){return e.clickRemoveImage(t.id)}}},[r("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                                    ลบรูปนี้\n                                ")],1)],1)],1)})),1)],1)],1)],1)],1):r("v-alert",{attrs:{type:"error"}},[e._v("\n        "+e._s(e.response.message)+"\n    ")])],1)}),[],!1,null,null,null);t.default=l.exports}}]);