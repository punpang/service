(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{55:function(t,e,r){"use strict";r.r(e);var a=r(0),s=r.n(a);function o(t,e,r,a,s,o,n){try{var i=t[o](n),d=i.value}catch(t){return void r(t)}i.done?e(d):Promise.resolve(d).then(a,s)}var n={props:["propOpenReward","propUuid"],data:function(){return{dialog:!1}},methods:{openReward:function(){var t,e=this;return(t=s.a.mark((function t(){var r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.propOpenReward.status_open){t.next=8;break}return r=e.$loading.show(),a={reward_label_id:e.propOpenReward.id,reward_customer_id:e.propOpenReward.reward_customer_id,reward_id:e.propOpenReward.reward_id,uuid:e.propUuid},t.next=5,e.$store.dispatch("orderLuckyReward/openReward",a);case 5:200===(o=t.sent).status&&!0===o.data.success?(e.propOpenReward.status_open=1,e.$swal({title:"เปิดรางวัลแล้ว",text:'รางวัลของคุณ คือ " '+e.propOpenReward.reward.name+' "',icon:"success",allowOutsideClick:!1,confirmButtonText:"รับทราบ"})):201===o.status&&!0===o.data.error&&e.$swal({title:o.data.message,icon:"error",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),r.hide();case 8:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,s){var n=t.apply(e,r);function i(t){o(n,a,s,i,d,"next",t)}function d(t){o(n,a,s,i,d,"throw",t)}i(void 0)}))})()},close:function(){this.dialog=!1}}},i=r(1);function d(t,e,r,a,s,o,n){try{var i=t[o](n),d=i.value}catch(t){return void r(t)}i.done?e(d):Promise.resolve(d).then(a,s)}var c={props:["propGetRedeemCode","propUuid"],data:function(){return{dialog:!1}},methods:{getRedeemCode:function(){var t,e=this;return(t=s.a.mark((function t(){var r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==e.propGetRedeemCode.status_open||0!==e.propGetRedeemCode.status_use_redeem_code){t.next=9;break}return r=e.$loading.show(),a={reward_label_id:e.propGetRedeemCode.id,reward_customer_id:e.propGetRedeemCode.reward_customer_id,reward_id:e.propGetRedeemCode.reward_id,uuid:e.propUuid},t.next=5,e.$store.dispatch("orderLuckyReward/getRedeemCode",a);case 5:200===(o=t.sent).status&&!0===o.data.success?(e.propGetRedeemCode.status_open=1,e.$swal({title:"รับรหัสลับ Redeem Code",text:o.data.message,icon:"success",allowOutsideClick:!1,confirmButtonText:"รับทราบ"})):201===o.status&&!0===o.data.error&&e.$swal({title:o.data.message,icon:"error",allowOutsideClick:!1,confirmButtonText:"รับทราบ"}),e.close(),r.hide();case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(a,s){var o=t.apply(e,r);function n(t){d(o,a,s,n,i,"next",t)}function i(t){d(o,a,s,n,i,"throw",t)}n(void 0)}))})()},close:function(){this.dialog=!1}}};function l(t,e,r,a,s,o,n){try{var i=t[o](n),d=i.value}catch(t){return void r(t)}i.done?e(d):Promise.resolve(d).then(a,s)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(a,s){var o=t.apply(e,r);function n(t){l(o,a,s,n,i,"next",t)}function i(t){l(o,a,s,n,i,"throw",t)}n(void 0)}))}}var p={components:{openReward:Object(i.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"350",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({attrs:{color:"info","x-large":"",block:""}},a),[r("strong",[t._v("เปิดรางวัล")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-sheet",{staticClass:"px-7 pt-7 pb-4 mx-auto text-center d-inline-block",attrs:{color:"blue-grey darken-3",dark:""}},[r("div",{staticClass:"grey--text text--lighten-1 text-body-2 mb-4"},[r("strong",[t._v("คุณต้องการเปิดรางวัลใช่ไหม ?")])]),t._v(" "),r("v-btn",{staticClass:"ma-1",attrs:{color:"success",plain:""},on:{click:t.openReward}},[t._v("\n        เปิด\n      ")]),t._v(" "),r("v-btn",{staticClass:"ma-1",attrs:{color:"error",plain:""},on:{click:t.close}},[t._v(" ออก ")])],1)],1)],1)}),[],!1,null,null,null).exports,getRedeemCode:Object(i.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"350",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[r("v-btn",t._g({staticClass:"mt-3",attrs:{color:"warning","x-large":"",block:""}},a),[r("strong",[t._v("รับรหัส Redeem Code")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-sheet",{staticClass:"px-7 pt-7 pb-4 mx-auto text-center d-inline-block",attrs:{color:"blue-grey darken-3",dark:""}},[r("div",{staticClass:"grey--text text--lighten-1 text-body-2 mb-4"},[r("strong",[t._v("คุณต้องการรับรหัส Redeem Code ใช่ไหม ?")])]),t._v(" "),r("v-btn",{staticClass:"ma-1",attrs:{color:"success",plain:""},on:{click:t.getRedeemCode}},[t._v("\n        รับรหัส\n      ")]),t._v(" "),r("v-btn",{staticClass:"ma-1",attrs:{color:"error",plain:""},on:{click:t.close}},[t._v(" ออก ")])],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{datas:{labels:[]},uuid:""}},methods:{start:function(){var t=this;return u(s.a.mark((function e(){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$loading.show(),e.next=3,t.$store.dispatch("orderLuckyReward/getByUUID",{uuid:t.$route.params.uuid});case 3:204===(a=e.sent).status&&t.$swal({title:"ลิงก์หมดอายุ",icon:"error",text:"โปรดติดต่อ 091-885-3402 เพื่อขอลิงก์ใหม่",allowOutsideClick:!1,showConfirmButton:!1}),t.datas=a.data,t.uuid=t.$route.params.uuid,r.hide();case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return u(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.start();case 1:case"end":return e.stop()}}),e)})))()}},v=Object(i.a)(p,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"mb-4"},[r("v-card-title",{staticClass:"pb-0"},[r("h2",[t._v("ลุ้นรางวัล (สำหรับลูกค้า)")])]),t._v(" "),r("v-divider",{staticClass:"mb-0"}),t._v(" "),r("v-card-text",[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{md:"4",cols:"12"}},[r("h5",{staticClass:"mb-0"},[t._v("ชื่อ : "+t._s(t.datas.name))])]),t._v(" "),r("v-col",{attrs:{md:"4",cols:"12"}},[r("h5",{staticClass:"mb-0"},[r("p",{staticClass:"mb-0"},[t._v("เบอร์โทรศัพท์ : "+t._s(t.datas.phone))])])]),t._v(" "),r("v-col",{attrs:{md:"4",cols:"12"}},[r("h5",{staticClass:"mb-0"},[t._v("จำนวน "+t._s(t.datas.labels.length)+" รางวัล")])])],1)],1)],1),t._v(" "),r("v-row",t._l(t.datas.labels,(function(e){return r("v-col",{key:e.key,attrs:{md:"4",cols:"12"}},[r("v-card",{attrs:{height:"100%"}},[0===e.status_open?r("v-card-text",{staticClass:"text-center"},[r("openReward",{attrs:{propOpenReward:e,propUuid:t.uuid}})],1):r("v-card-text",{staticClass:"text-center"},[1===e.reward_id?r("div",[r("strong",[t._v("วัน-เวลาทำรายการ : "+t._s(e.updated_at))]),t._v(" "),r("v-alert",{attrs:{type:"error"}},[r("strong",[t._v("ไม่ได้รางวัล")])])],1):r("div",[r("v-simple-table",[r("tbody",[r("tr",[r("td",{staticClass:"text-left"},[r("strong",[t._v("ชื่อของรางวัล")])]),t._v(" "),r("td",{staticClass:"text-right"},[r("strong",[t._v(t._s(e.reward.name))])])]),t._v(" "),r("tr",[r("td",{staticClass:"text-left"},[r("strong",[t._v("มูลค่า")])]),t._v(" "),r("td",{staticClass:"text-right"},[r("strong",[t._v(t._s(e.reward.value)+" บาท")])])])])]),t._v(" "),0===e.status_use_redeem_code?r("getRedeemCode",{attrs:{propGetRedeemCode:e,propUuid:t.uuid}}):r("v-alert",{staticClass:"mt-3 mb-0",attrs:{type:"success"}},[r("strong",[t._v("แลกของรางวัลแล้ว")])])],1)])],1)],1)})),1)],1)}),[],!1,null,null,null);e.default=v.exports}}]);