(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{10:function(t,e,a){"use strict";var s={props:["path"]},r=a(1),n=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-img",{attrs:{src:"https://drive.google.com/thumbnail?id="+this.path+"&sz=w800-h800","lazy-src":"https://drive.google.com/thumbnail?id="+this.path+"&sz=w800-h800"},scopedSlots:this._u([{key:"placeholder",fn:function(){return[e("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])})}),[],!1,null,null,null);e.a=n.exports},12:function(t,e,a){"use strict";var s={props:["order"]},r=a(1),n=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[t._v("ชื่อลูกค้า")]),t._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.order.customer_not_f_b.name))])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[t._v("เบอร์โทรศัพท์")]),t._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.order.customer_not_f_b.phone))])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"5",md:"6"}},[t._v("วัน-เวลารับสินค้า")]),t._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"7",md:"6"}},[t._v(t._s(t.order.dateTime_get))])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[t._v("ช่องทางการสั่งซื้อ")]),t._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[t._v(t._s(t.order.channel_of_purchase.name))])],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"5",md:"5"}},[t._v("สถานะ")]),t._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"7",md:"7"}},[t._v(t._s(t.order.order_status.name))])],1)],1)}),[],!1,null,null,null);e.a=n.exports},44:function(t,e,a){"use strict";a.r(e);var s=a(0),r=a.n(s),n=a(12),o=a(6);function i(t,e,a,s,r,n,o){try{var i=t[n](o),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(s,r)}function c(t){return function(){var e=this,a=arguments;return new Promise((function(s,r){var n=t.apply(e,a);function o(t){i(n,s,r,o,c,"next",t)}function c(t){i(n,s,r,o,c,"throw",t)}o(void 0)}))}}var l={components:{OrderDetail:n.a,productDetail:o.a},data:function(){return{response:{data:{success:null}},chooseRemove:!1,previewExample:"",previewImages:[],form:{write:""},chooseRemoveImages:[]}},methods:{start:function(){var t=this;return c(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.token=t.$route.params.token,e.next=3,axios.get("/api/v1/guest/order/"+t.token+"/uploadImageByToken");case 3:200===(a=e.sent).status&&(a.data.success&&(t.form.write=a.data.data.order_detail.write),t.response=a.data);case 5:case"end":return e.stop()}}),e)})))()},onFileChangeExample:function(t){var e=this;return c(r.a.mark((function t(){var a,s,n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading.show(),s=event.target.files[0],(n=new FormData).append("image",s),t.next=6,axios.post("/api/v1/guest/order/"+e.token+"/uploadImageByToken/example",n);case 6:return o=t.sent,t.next=9,e.start();case 9:a.hide(),e.toast(o);case 11:case"end":return t.stop()}}),t)})))()},onFileChangeImages:function(t){var e=this;return c(r.a.mark((function a(){var s,n,o,i,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=e.$loading.show(),n=event.target.files,o=new FormData,e.$toast.warning("กำลังอัปโหลดรูป "+t.length+" รูป"),i={},c=0;case 6:if(!(c<t.length)){a.next=15;break}return o.append("image",n[c]),a.next=10,axios.post("/api/v1/guest/order/"+e.token+"/uploadImageByToken/images",o);case 10:(i=a.sent).data.success?e.$toast.success(i.data.message+" "+(c+1)+"/"+t.length+" รูป"):(c=t.length,e.$toast.error("คุณไม่มีสิทธิ์อัปโหลดส่วนนี้"));case 12:c++,a.next=6;break;case 15:return a.next=17,e.start();case 17:s.hide();case 18:case"end":return a.stop()}}),a)})))()},clickRemoveImage:function(t){var e=this;return c(r.a.mark((function a(){var s,n,o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=e.$loading.show(),n={},e.$toast.warning("กำลังลบรูปภาพ "+t.length+" รูป"),o=0;case 4:if(!(o<t.length)){a.next=12;break}return a.next=7,axios.delete("/api/v1/guest/order/"+e.token+"/uploadImageByToken/"+t[o].id+"/delete");case 7:(n=a.sent).data.success?e.$toast.success(n.data.message+" "+(o+1)+"/"+t.length+" รูป"):(o=t.length,e.$toast.error("คุณไม่มีสิทธิ์อัปโหลดส่วนนี้"));case 9:o++,a.next=4;break;case 12:return e.clickRemoveImageCancel(),a.next=15,e.start();case 15:s.hide();case 16:case"end":return a.stop()}}),a)})))()},clickImageMain:function(t){var e=this;return c(r.a.mark((function a(){var s,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.$loading.show(),a.next=3,axios.post("/api/v1/guest/order/"+e.token+"/uploadImageByToken/"+t+"/ImageMain");case 3:return n=a.sent,a.next=6,e.start();case 6:s.hide(),e.toast(n);case 8:case"end":return a.stop()}}),a)})))()},clickSubmitUpdateWrite:function(){var t=this;return c(r.a.mark((function e(){var a,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$loading.show(),e.next=3,axios.post("/api/v1/guest/order/"+t.token+"/updateWrite",t.form);case 3:return s=e.sent,e.next=6,t.start();case 6:a.hide(),t.toast(s);case 8:case"end":return e.stop()}}),e)})))()},toast:function(t){200===t.status?t.data.success?this.$toast.success(t.data.message):this.$toast.error(t.data.message):this.$toast.error("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง")},clickRemoveImageCancel:function(){this.chooseRemove=!1,this.chooseRemoveImages=[]}},mounted:function(){var t=this;return c(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$loading.show(),e.next=3,t.start();case 3:a.hide();case 4:case"end":return e.stop()}}),e)})))()}},v=a(1),d=Object(v.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[null==t.response.success?a("div",[a("v-alert",{attrs:{type:"info"}},[t._v("\n            กำลังโหลดข้อมูล...รอสักครู่ค่ะ\n        ")])],1):t.response.success||null==t.response.success?a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[a("h5",[t._v("ข้อมูลรายการสั่งซื้อ")]),t._v(" "),a("v-divider"),t._v(" "),a("OrderDetail",{attrs:{order:t.response.data.order_detail.order}}),t._v(" "),a("v-divider"),t._v(" "),a("h5",[t._v("ข้อมูลสินค้า")]),t._v(" "),a("v-divider",{staticClass:"mb-0"}),t._v(" "),a("productDetail",{attrs:{detail:t.response.data.order_detail}}),t._v(" "),a("v-divider",{staticClass:"my-0"})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[t.response.data.example?a("div",{staticClass:"mb-4"},[a("h5",[t._v("รูปภาพต้นแบบสินค้า")]),t._v(" "),a("v-divider"),t._v(" "),t.response.data.example_image?a("v-img",{staticClass:"mb-4",attrs:{src:t.response.data.example_image.url}},[a("v-btn",{staticClass:"mt-4 ml-4",attrs:{color:"error"},on:{click:function(e){return t.clickRemoveImage([t.response.data.example_image])}}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                        ลบรูปนี้\n                    ")],1)],1):a("div",[a("v-file-input",{staticClass:"mb-4",attrs:{outlined:"","prepend-icon":"image",placeholder:"รูปภาพต้นแบบสินค้า",accept:"image/*","hide-details":"",rules:[function(t){return!!t}]},on:{change:t.onFileChangeExample}}),t._v(" "),a("v-alert",{attrs:{type:"info"}},[t._v("โปรดอัปโหลดรูป")])],1),t._v(" "),a("v-divider")],1):t._e(),t._v(" "),t.response.data.image?a("div",[a("h5",[t._v("รูปภาพสำหรับทำสินค้า")]),t._v(" "),a("v-divider"),t._v(" "),a("v-text-field",{attrs:{label:"เขียนข้อความ",outlined:"","hide-details":"","prepend-icon":"edit"},model:{value:t.form.write,callback:function(e){t.$set(t.form,"write",e)},expression:"form.write"}}),t._v(" "),a("v-btn",{staticClass:"mt-2",attrs:{large:"",color:"success",block:"",disabled:t.form.write==t.response.data.order_detail.write||""==t.form.write},on:{click:t.clickSubmitUpdateWrite}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    บันทึกข้อความ\n                ")],1),t._v(" "),a("v-divider"),t._v(" "),a("v-form",{ref:"formInputImages"},[a("v-file-input",{staticClass:"mb-4",attrs:{multiple:"",outlined:"","prepend-icon":"image",placeholder:"เลือกรูปที่นี่",accept:"image/*","hide-details":""},on:{change:t.onFileChangeImages}})],1),t._v(" "),t.response.data.images.length>1?a("div",[t.response.data.images.length>1&&!t.chooseRemove?a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:function(e){t.chooseRemove=!0}}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                            เลือกรูปที่ต้องการลบ")],1)],1):a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"error",disabled:0==t.chooseRemoveImages.length},on:{click:function(e){return t.clickRemoveImage(t.chooseRemoveImages)}}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                            ลบรูปที่เลือกไว้")],1),t._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"error"},on:{click:function(e){return t.clickRemoveImage(t.response.data.images)}}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                            ลบรูปทั้งหมด")],1),t._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:t.clickRemoveImageCancel}},[a("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                            ยกเลิก")],1)],1)]):t._e(),t._v(" "),0==t.response.data.images.length?a("v-alert",{attrs:{type:"info"}},[t._v("โปรดอัปโหลดรูป")]):t._e(),t._v(" "),t._l(t.response.data.images,(function(e){return a("v-card",{key:e.id,staticClass:"mb-2",attrs:{outlined:""}},[a("v-img",{attrs:{src:e.url,"lazy-src":e.url},scopedSlots:t._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),t._v(" "),a("v-card-text",{staticClass:"pa-2"},[t.chooseRemove?a("v-checkbox",{staticClass:"ma-0",attrs:{label:"ลบรูปนี้","hide-details":"",value:e},model:{value:t.chooseRemoveImages,callback:function(e){t.chooseRemoveImages=e},expression:"chooseRemoveImages"}}):a("div",{staticClass:"mt-2"},[e.main?a("v-btn",{attrs:{color:"warning",text:""},on:{click:function(a){return t.clickImageMain(e.id)}}},[a("v-icon",{attrs:{left:""}},[t._v("star")]),t._v("\n                                ยกเลิกรูปหลัก\n                            ")],1):a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){return t.clickImageMain(e.id)}}},[a("v-icon",{attrs:{left:""}},[t._v("star_border")]),t._v("\n                                ตั้งเป็นรูปหลัก\n                            ")],1),t._v(" "),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(a){return t.clickRemoveImage([e])}}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                                ลบรูปนี้\n                            ")],1)],1)],1)],1)}))],2):t._e()])],1):a("div",[a("v-alert",{attrs:{type:"error"}},[t._v("\n            "+t._s(t.response.message)+"\n        ")]),t._v(" "),a("h5",[t._v("สาเหตุที่อาจเป็นไปได้")]),t._v(" "),a("v-divider"),t._v(" "),a("p",{staticClass:"title "},[t._v("\n            คุณอาจไม่มีสิทธิ์การเข้าถึงเว็ปไซต์นี้แล้ว\n            เนื่องจากสาเหตุดังต่อไปนี้\n        ")]),t._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[t._v("- ลิงก์เว็บอาจผิด")]),t._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[t._v("- รายการสั่งซื้อนี้ อาจถูกยกเลิกแล้ว")]),t._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[t._v("\n            - รายการสั่งซื้อนี้ อาจเลยวันรับสินค้าไปแล้ว\n        ")]),t._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[t._v("\n            - รายการสั่งซื้อนี้ อาจไม่มีสิทธิ์เข้าถึงการอัปโหลดรูปอีกต่อไป\n        ")]),t._v(" "),a("v-divider"),t._v(" "),a("h5",[t._v("ช่องทางติดต่อทางร้าน")]),t._v(" "),a("v-divider"),t._v(" "),a("v-btn",{attrs:{color:"primary",href:"http://m.me/punpangpranburi"}},[t._v("Facebook")]),t._v(" "),a("v-btn",{attrs:{color:"success",disabled:!0,href:"http://m.me/punpangpranburi"}},[t._v("Line")])],1)],1)}),[],!1,null,null,null);e.default=d.exports},6:function(t,e,a){"use strict";var s={props:["detail"],components:{imageThumbnailPathSize800:a(10).a}},r=a(1),n=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"4"}},[a("imageThumbnailPathSize800",{attrs:{path:t.detail.product.product_image.src_name}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-row",{staticClass:"px-4"},[a("span",{staticClass:"title font-weight-bold"},[t._v(t._s(t.detail.product.name))]),t._v(" "),a("v-spacer"),t._v(" "),a("span",{staticClass:"title font-weight-bold"},[t._v("X"+t._s(t.detail.quantity))])],1),t._v(" "),t._l(t.detail.product.product_tag_use_only,(function(e){return a("p",{key:e.id,staticClass:"mb-0"},[t._v("\n            "+t._s(e.product_category_sub_use_only.product_category.name)+"\n            :\n            "+t._s(e.product_category_sub_use_only.name)+"\n        ")])})),t._v(" "),t.detail.write_status?a("p",{staticClass:"mb-0"},[t._v("\n            เขียนข้อความ : "+t._s(t.detail.write)+"\n        ")]):t._e(),t._v(" "),t.detail.note_status?a("p",{staticClass:"mb-0"},[t._v("\n            หมายเหตุ : "+t._s(t.detail.note)+"\n        ")]):t._e(),t._v(" "),a("v-divider",{staticClass:"my-2"}),t._v(" "),a("p",{staticClass:"mb-0"},[t._v("ราคา/หน่วย "+t._s(t.detail.price)+" บาท")]),t._v(" "),a("p",{staticClass:"mb-0"},[t._v("รวมราคา "+t._s(t.detail.sum_price)+" บาท")])],2)],1)}),[],!1,null,null,null);e.a=n.exports}}]);