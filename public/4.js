(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{11:function(e,t,a){"use strict";var s={props:["order"]},r=a(1),n=Object(r.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[e._v("ชื่อลูกค้า")]),e._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[e._v(e._s(e.order.customer_not_f_b.name))])],1),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[e._v("เบอร์โทรศัพท์")]),e._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[e._v(e._s(e.order.customer_not_f_b.phone))])],1),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"5",md:"6"}},[e._v("วัน-เวลารับสินค้า")]),e._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"7",md:"6"}},[e._v(e._s(e.order.dateTime_get))])],1),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"6",md:"6"}},[e._v("สถานะ")]),e._v(" "),a("v-col",{staticClass:"text-right",attrs:{cols:"6",md:"6"}},[e._v(e._s(e.order.order_status.name))])],1)],1)}),[],!1,null,null,null);t.a=n.exports},43:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(11),o=a(6);function i(e,t,a,s,r,n,o){try{var i=e[n](o),c=i.value}catch(e){return void a(e)}i.done?t(c):Promise.resolve(c).then(s,r)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(s,r){var n=e.apply(t,a);function o(e){i(n,s,r,o,c,"next",e)}function c(e){i(n,s,r,o,c,"throw",e)}o(void 0)}))}}var l={components:{OrderDetail:n.a,productDetail:o.a},data:function(){return{response:{data:{success:null}},chooseRemove:!1,previewExample:"",previewImages:[],form:{write:""},chooseRemoveImages:[]}},methods:{start:function(){var e=this;return c(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.token=e.$route.params.token,t.next=3,axios.get("/api/v1/guest/order/"+e.token+"/uploadImageByToken");case 3:200===(a=t.sent).status&&(a.data.success&&(e.form.write=a.data.data.order_detail.write),e.response=a.data);case 5:case"end":return t.stop()}}),t)})))()},onFileChangeExample:function(e){var t=this;return c(r.a.mark((function e(){var a,s,n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.$loading.show(),s=event.target.files[0],(n=new FormData).append("image",s),e.next=6,axios.post("/api/v1/guest/order/"+t.token+"/uploadImageByToken/example",n);case 6:return o=e.sent,e.next=9,t.start();case 9:a.hide(),t.toast(o);case 11:case"end":return e.stop()}}),e)})))()},onFileChangeImages:function(e){var t=this;return c(r.a.mark((function a(){var s,n,o,i,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=t.$loading.show(),n=event.target.files,o=new FormData,t.$toast.warning("กำลังอัปโหลดรูป "+e.length+" รูป"),i={},c=0;case 6:if(!(c<e.length)){a.next=15;break}return o.append("image",n[c]),a.next=10,axios.post("/api/v1/guest/order/"+t.token+"/uploadImageByToken/images",o);case 10:(i=a.sent).data.success?t.$toast.success(i.data.message+" "+(c+1)+"/"+e.length+" รูป"):(c=e.length,t.$toast.error("คุณไม่มีสิทธิ์อัปโหลดส่วนนี้"));case 12:c++,a.next=6;break;case 15:return a.next=17,t.start();case 17:s.hide();case 18:case"end":return a.stop()}}),a)})))()},clickRemoveImage:function(e){var t=this;return c(r.a.mark((function a(){var s,n,o;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=t.$loading.show(),n={},t.$toast.warning("กำลังลบรูปภาพ "+e.length+" รูป"),o=0;case 4:if(!(o<e.length)){a.next=12;break}return a.next=7,axios.delete("/api/v1/guest/order/"+t.token+"/uploadImageByToken/"+e[o].id+"/delete");case 7:(n=a.sent).data.success?t.$toast.success(n.data.message+" "+(o+1)+"/"+e.length+" รูป"):(o=e.length,t.$toast.error("คุณไม่มีสิทธิ์อัปโหลดส่วนนี้"));case 9:o++,a.next=4;break;case 12:return t.clickRemoveImageCancel(),a.next=15,t.start();case 15:s.hide();case 16:case"end":return a.stop()}}),a)})))()},clickImageMain:function(e){var t=this;return c(r.a.mark((function a(){var s,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.$loading.show(),a.next=3,axios.post("/api/v1/guest/order/"+t.token+"/uploadImageByToken/"+e+"/ImageMain");case 3:return n=a.sent,a.next=6,t.start();case 6:s.hide(),t.toast(n);case 8:case"end":return a.stop()}}),a)})))()},clickSubmitUpdateWrite:function(){var e=this;return c(r.a.mark((function t(){var a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading.show(),t.next=3,axios.post("/api/v1/guest/order/"+e.token+"/updateWrite",e.form);case 3:return s=t.sent,t.next=6,e.start();case 6:a.hide(),e.toast(s);case 8:case"end":return t.stop()}}),t)})))()},toast:function(e){200===e.status?e.data.success?this.$toast.success(e.data.message):this.$toast.error(e.data.message):this.$toast.error("เกิดข้อผิดพลาดบางอย่างขึ้น กรุณาลองอีกครั้ง")},clickRemoveImageCancel:function(){this.chooseRemove=!1,this.chooseRemoveImages=[]}},mounted:function(){var e=this;return c(r.a.mark((function t(){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.$loading.show(),t.next=3,e.start();case 3:a.hide();case 4:case"end":return t.stop()}}),t)})))()}},v=a(1),d=Object(v.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[null==e.response.success?a("div",[a("v-alert",{attrs:{type:"info"}},[e._v("\n            กำลังโหลดข้อมูล...รอสักครู่ค่ะ\n        ")])],1):e.response.success||null==e.response.success?a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"6"}},[a("h5",[e._v("ข้อมูลรายการสั่งซื้อ")]),e._v(" "),a("v-divider"),e._v(" "),a("OrderDetail",{attrs:{order:e.response.data.order_detail.order}}),e._v(" "),a("v-divider"),e._v(" "),a("h5",[e._v("ข้อมูลสินค้า")]),e._v(" "),a("v-divider",{staticClass:"mb-0"}),e._v(" "),a("productDetail",{attrs:{detail:e.response.data.order_detail}}),e._v(" "),a("v-divider",{staticClass:"my-0"})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[e.response.data.example?a("div",{staticClass:"mb-4"},[a("h5",[e._v("รูปภาพต้นแบบสินค้า")]),e._v(" "),a("v-divider"),e._v(" "),e.response.data.example_image?a("v-img",{staticClass:"mb-4",attrs:{src:e.response.data.example_image.url}},[a("v-btn",{staticClass:"mt-4 ml-4",attrs:{color:"error"},on:{click:function(t){return e.clickRemoveImage([e.response.data.example_image])}}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                        ลบรูปนี้\n                    ")],1)],1):a("div",[a("v-file-input",{staticClass:"mb-4",attrs:{outlined:"","prepend-icon":"image",placeholder:"รูปภาพต้นแบบสินค้า",accept:"image/*","hide-details":"",rules:[function(e){return!!e}]},on:{change:e.onFileChangeExample}}),e._v(" "),a("v-alert",{attrs:{type:"info"}},[e._v("โปรดอัปโหลดรูป")])],1),e._v(" "),a("v-divider")],1):e._e(),e._v(" "),e.response.data.image?a("div",[a("h5",[e._v("รูปภาพสำหรับทำสินค้า")]),e._v(" "),a("v-divider"),e._v(" "),a("v-text-field",{attrs:{label:"เขียนข้อความ",outlined:"","hide-details":"","prepend-icon":"edit"},model:{value:e.form.write,callback:function(t){e.$set(e.form,"write",t)},expression:"form.write"}}),e._v(" "),a("v-btn",{staticClass:"mt-2",attrs:{large:"",color:"success",block:"",disabled:e.form.write==e.response.data.order_detail.write||""==e.form.write},on:{click:e.clickSubmitUpdateWrite}},[a("v-icon",{attrs:{left:""}},[e._v("save")]),e._v("\n                    บันทึกข้อความ\n                ")],1),e._v(" "),a("v-divider"),e._v(" "),a("v-form",{ref:"formInputImages"},[a("v-file-input",{staticClass:"mb-4",attrs:{multiple:"",outlined:"","prepend-icon":"image",placeholder:"เลือกรูปที่นี่",accept:"image/*","hide-details":""},on:{change:e.onFileChangeImages}})],1),e._v(" "),e.response.data.images.length>1?a("div",[e.response.data.images.length>1&&!e.chooseRemove?a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:function(t){e.chooseRemove=!0}}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                            เลือกรูปที่ต้องการลบ")],1)],1):a("div",[a("v-btn",{staticClass:"mb-2",attrs:{color:"error",disabled:0==e.chooseRemoveImages.length},on:{click:function(t){return e.clickRemoveImage(e.chooseRemoveImages)}}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                            ลบรูปที่เลือกไว้")],1),e._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"error"},on:{click:function(t){return e.clickRemoveImage(e.response.data.images)}}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                            ลบรูปทั้งหมด")],1),e._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"warning"},on:{click:e.clickRemoveImageCancel}},[a("v-icon",{attrs:{left:""}},[e._v("close")]),e._v("\n                            ยกเลิก")],1)],1)]):e._e(),e._v(" "),0==e.response.data.images.length?a("v-alert",{attrs:{type:"info"}},[e._v("โปรดอัปโหลดรูป")]):e._e(),e._v(" "),e._l(e.response.data.images,(function(t){return a("v-card",{key:t.id,staticClass:"mb-2",attrs:{outlined:""}},[a("v-img",{attrs:{src:t.url,"lazy-src":t.url},scopedSlots:e._u([{key:"placeholder",fn:function(){return[a("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),e._v(" "),a("v-card-text",{staticClass:"pa-2"},[e.chooseRemove?a("v-checkbox",{staticClass:"ma-0",attrs:{label:"ลบรูปนี้","hide-details":"",value:t},model:{value:e.chooseRemoveImages,callback:function(t){e.chooseRemoveImages=t},expression:"chooseRemoveImages"}}):a("div",{staticClass:"mt-2"},[t.main?a("v-btn",{attrs:{color:"warning",text:""},on:{click:function(a){return e.clickImageMain(t.id)}}},[a("v-icon",{attrs:{left:""}},[e._v("star")]),e._v("\n                                ยกเลิกรูปหลัก\n                            ")],1):a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(a){return e.clickImageMain(t.id)}}},[a("v-icon",{attrs:{left:""}},[e._v("star_border")]),e._v("\n                                ตั้งเป็นรูปหลัก\n                            ")],1),e._v(" "),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(a){return e.clickRemoveImage([t])}}},[a("v-icon",{attrs:{left:""}},[e._v("delete")]),e._v("\n                                ลบรูปนี้\n                            ")],1)],1)],1)],1)}))],2):e._e()])],1):a("div",[a("v-alert",{attrs:{type:"error"}},[e._v("\n            "+e._s(e.response.message)+"\n        ")]),e._v(" "),a("h5",[e._v("สาเหตุที่อาจเป็นไปได้")]),e._v(" "),a("v-divider"),e._v(" "),a("p",{staticClass:"title "},[e._v("\n            คุณอาจไม่มีสิทธิ์การเข้าถึงเว็ปไซต์นี้แล้ว\n            เนื่องจากสาเหตุดังต่อไปนี้\n        ")]),e._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[e._v("- ลิงก์เว็บอาจผิด")]),e._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[e._v("- รายการสั่งซื้อนี้ อาจถูกยกเลิกแล้ว")]),e._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[e._v("\n            - รายการสั่งซื้อนี้ อาจเลยวันรับสินค้าไปแล้ว\n        ")]),e._v(" "),a("p",{staticClass:"subtitle-2 mb-2"},[e._v("\n            - รายการสั่งซื้อนี้ อาจไม่มีสิทธิ์เข้าถึงการอัปโหลดรูปอีกต่อไป\n        ")]),e._v(" "),a("v-divider"),e._v(" "),a("h5",[e._v("ช่องทางติดต่อทางร้าน")]),e._v(" "),a("v-divider"),e._v(" "),a("v-btn",{attrs:{color:"primary",href:"http://m.me/punpangpranburi"}},[e._v("Facebook")]),e._v(" "),a("v-btn",{attrs:{color:"success",disabled:!0,href:"http://m.me/punpangpranburi"}},[e._v("Line")])],1)],1)}),[],!1,null,null,null);t.default=d.exports},6:function(e,t,a){"use strict";var s={props:["src"]},r=a(1),n={props:["detail"],components:{imageThumbnail:Object(r.a)(s,(function(){var e=this.$createElement;return(this._self._c||e)("v-img",{attrs:{src:"https://drive.google.com/thumbnail?id="+this.src.src_name}})}),[],!1,null,null,null).exports}},o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:"4"}},[a("imageThumbnail",{attrs:{src:e.detail.product.product_image}})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-row",{staticClass:"px-4"},[a("span",{staticClass:"title font-weight-bold"},[e._v(e._s(e.detail.product.name))]),e._v(" "),a("v-spacer"),e._v(" "),a("span",{staticClass:"title font-weight-bold"},[e._v("X"+e._s(e.detail.quantity))])],1),e._v(" "),e._l(e.detail.product.product_tag_use_only,(function(t){return a("p",{key:t.id,staticClass:"mb-0"},[e._v("\n            "+e._s(t.product_category_sub_use_only.product_category.name)+"\n            :\n            "+e._s(t.product_category_sub_use_only.name)+"\n        ")])})),e._v(" "),e.detail.write_status?a("p",{staticClass:"mb-0"},[e._v("\n            เขียนข้อความ : "+e._s(e.detail.write)+"\n        ")]):e._e(),e._v(" "),e.detail.note_status?a("p",{staticClass:"mb-0"},[e._v("\n            หมายเหตุ : "+e._s(e.detail.note)+"\n        ")]):e._e(),e._v(" "),a("v-divider",{staticClass:"my-2"}),e._v(" "),a("p",{staticClass:"mb-0"},[e._v("ราคา/หน่วย "+e._s(e.detail.price)+" บาท")]),e._v(" "),a("p",{staticClass:"mb-0"},[e._v("รวมราคา "+e._s(e.detail.sum_price)+" บาท")])],2)],1)}),[],!1,null,null,null);t.a=o.exports}}]);