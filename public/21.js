(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{40:function(t,e,a){"use strict";a.r(e);var r=a(0),o=a.n(r);function n(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var s={data:function(){return{overlay:!1,dialog:!1,loading:!1,form:{name:"",status:!0},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}]}}},methods:{save:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=9;break}return e.loading=!0,e.overlay=!0,t.next=5,e.$store.dispatch("productCategory/add",e.form);case 5:200===t.sent.status&&(e.dialog=!1,e.$toast.success("เพิ่มกลุ่มสินค้าสำเร็จ"),e.loading=!1,e.overlay=!1,e.form.status=!0,e.form.name=""),t.next=10;break;case 9:e.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง");case 10:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var s=t.apply(e,a);function i(t){n(s,r,o,i,c,"next",t)}function c(t){n(s,r,o,i,c,"throw",t)}i(void 0)}))})()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.form.name=""}}},i=a(1),c=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"}},r),[t._v("เพิ่มกลุ่มสินค้า")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("เพิ่มกลุ่มสินค้า\n        "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"ชื่อกลุ่มสินค้า",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"สถานะ"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n          บันทึก\n        ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n          ล้างข้อมูล\n        ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function l(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var u={props:["data"],data:function(){return{overlay:!1,loading:!1,dialog:!1,form:{id:this.data.id,name:this.data.name},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}]}}},methods:{save:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=9;break}return e.loading=!0,e.overlay=!0,t.next=5,e.$store.dispatch("productCategory/update",e.form);case 5:200===t.sent.status&&(e.$toast.success("แก้ไขกลุ่มสินค้าสำเร็จ"),e.loading=!1,e.overlay=!1,e.dialog=!1),t.next=10;break;case 9:e.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง");case 10:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){l(n,r,o,s,i,"next",t)}function i(t){l(n,r,o,s,i,"throw",t)}s(void 0)}))})()}}};function v(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var d={components:{editProductCategory:Object(i.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({staticClass:"d-flex d-sm-none",attrs:{color:"warning"}},r),[t._v("edit")]),t._v(" "),a("v-btn",t._g({staticClass:"d-none d-sm-flex",attrs:{color:"warning",small:"",rounded:""}},r),[a("v-icon",{attrs:{left:"",small:""}},[t._v("edit")]),t._v("แก้ไข")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("แก้ไขกลุ่มสินค้า\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"ชื่อกลุ่มสินค้า",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    บันทึก\n                ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                    ปิด\n                ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!1,search:"",headers:[{text:"ชื่อกลุ่ม",value:"name"},{text:"สถานะ",value:"status"},{text:"การจัดการ",value:"menu"}]}},methods:{changeStatus:function(t){var e,a=this;return(e=o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.overlay=!0,r={id:t.id,status:t.status},e.next=4,a.$store.dispatch("productCategory/update",r);case 4:200==e.sent.status&&(a.$toast.success("เปลี่ยนแปลงสถานะสำเร็จ"),a.overlay=!1);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,o){var n=e.apply(t,a);function s(t){v(n,r,o,s,i,"next",t)}function i(t){v(n,r,o,s,i,"throw",t)}s(void 0)}))})()}}},m=Object(i.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-text-field",{attrs:{label:"ค้นหา","append-icon":"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:this.$store.getters["productCategory/data"],search:t.search,"items-per-page":10,"no-results-text":"ไม่พบข้อมูลที่ค้นหา","loading-text":"รอสักครู่...กำลังโหลดข้อมูล","item-key":"id"},scopedSlots:t._u([{key:"item.status",fn:function(e){var r=e.item;return[a("v-switch",{attrs:{inset:""},on:{change:function(e){return t.changeStatus(r)}},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"item.status"}})]}},{key:"item.menu",fn:function(t){var e=t.item;return[a("div",[a("editProductCategory",{attrs:{data:e}})],1)]}}])}),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)}),[],!1,null,null,null).exports;function f(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var p={data:function(){return{overlay:!1,dialog:!1,loading:!1,form:{name:"",status:!0,product_category_id:""},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}],product_category_id:[function(t){return!!t||"ห้ามเว้นว่าง"}]}}},methods:{save:function(){var t,e=this;return(t=o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=8;break}return e.loading=!0,t.next=4,e.$store.dispatch("productCategorySub/add",e.form);case 4:200===(a=t.sent).status?(e.dialog=!1,e.$toast.success("เพิ่มกลุ่มสินค้าย่อยสำเร็จ"),e.form={name:"",status:!0,product_category_id:""},e.loading=!1):500===a.status?(e.$toast.error("เกิดข้อผิดพลาดด้านเซิร์ฟเวอร์ กรุณาลองอีกครั้ง"),e.loading=!1):(e.$toast.warning("เกิดข้อผิดพลาดบางอย่าง กรุณาลองอีกครั้ง"),e.loading=!1),t.next=9;break;case 8:e.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง");case 9:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){f(n,r,o,s,i,"next",t)}function i(t){f(n,r,o,s,i,"throw",t)}s(void 0)}))})()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.form.name=""}}},g=Object(i.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"}},r),[t._v("เพิ่มกลุ่มสินค้าย่อย")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("เพิ่มกลุ่มสินค้าย่อย\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-select",{attrs:{items:this.$store.getters["productCategory/dataUseOnly"],"item-text":"name","item-value":"id",label:"กลุ่มสินค้าใหญ่",rules:t.Rules.product_category_id},model:{value:t.form.product_category_id,callback:function(e){t.$set(t.form,"product_category_id",e)},expression:"form.product_category_id"}}),t._v(" "),a("v-text-field",{attrs:{label:"ชื่อกลุ่มสินค้าย่อย",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"สถานะ"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    บันทึก\n                ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n                    ล้างข้อมูล\n                ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function _(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var h={props:["data"],data:function(){return{overlay:!1,loading:!1,dialog:!1,form:{id:this.data.id,name:this.data.name,product_category_id:this.data.product_category_id},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}]}}},methods:{save:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=8;break}return e.loading=!0,t.next=4,e.$store.dispatch("productCategorySub/update",e.form);case 4:200===t.sent.status&&(e.$toast.success("แก้ไขกลุ่มสินค้าย่อยสำเร็จ"),e.loading=!1,e.dialog=!1),t.next=9;break;case 8:e.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง");case 9:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){_(n,r,o,s,i,"next",t)}function i(t){_(n,r,o,s,i,"throw",t)}s(void 0)}))})()}}};function b(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var x={components:{editProductCategorySub:Object(i.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({staticClass:"d-flex d-sm-none",attrs:{color:"warning"}},r),[t._v("edit")]),t._v(" "),a("v-btn",t._g({staticClass:"d-none d-sm-flex",attrs:{color:"warning",small:"",rounded:""}},r),[a("v-icon",{attrs:{left:"",small:""}},[t._v("edit")]),t._v("แก้ไข")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("แก้ไขกลุ่มสินค้าย่อย\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-select",{attrs:{items:this.$store.getters["productCategory/dataUseOnly"],"item-text":"name","item-value":"id",label:"กลุ่มสินค้าใหญ่",required:""},model:{value:t.form.product_category_id,callback:function(e){t.$set(t.form,"product_category_id",e)},expression:"form.product_category_id"}}),t._v(" "),a("v-text-field",{attrs:{label:"ชื่อกลุ่มสินค้าย่อย",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    บันทึก\n                ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[a("v-icon",{attrs:{left:""}},[t._v("close")]),t._v("\n                    ปิด\n                ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!1,search:"",headers:[{text:"ชื่อกลุ่ม",value:"name"},{text:"กลุ่มใหญ่",value:"product_category.name"},{text:"สถานะ",value:"status"},{text:"การจัดการ",value:"menu"}]}},methods:{changeStatus:function(t){var e,a=this;return(e=o.a.mark((function e(){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.overlay=!0,r={id:t.id,status:t.status},e.next=4,a.$store.dispatch("productCategorySub/update",r);case 4:200===e.sent.status&&(a.$toast.success("เปลี่ยนแปลงสถานะสำเร็จ"),a.overlay=!1);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,o){var n=e.apply(t,a);function s(t){b(n,r,o,s,i,"next",t)}function i(t){b(n,r,o,s,i,"throw",t)}s(void 0)}))})()}}};function w(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function y(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){w(n,r,o,s,i,"next",t)}function i(t){w(n,r,o,s,i,"throw",t)}s(void 0)}))}}var k={components:{addProductCategorySub:g,getProductCategorySub:Object(i.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-text-field",{attrs:{label:"ค้นหา","append-icon":"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:this.$store.getters["productCategorySub/data"],search:t.search,"items-per-page":10,"no-results-text":"ไม่พบข้อมูลที่ค้นหา","loading-text":"รอสักครู่...กำลังโหลดข้อมูล","item-key":"id"},scopedSlots:t._u([{key:"item.status",fn:function(e){var r=e.item;return[a("v-switch",{attrs:{inset:""},on:{change:function(e){return t.changeStatus(r)}},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"item.status"}})]}},{key:"item.menu",fn:function(t){var e=t.item;return[a("div",[a("editProductCategorySub",{attrs:{data:e}})],1)]}}])}),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!1,dialog:!1}},methods:{reload:function(){var t=this;return y(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,t.$store.commit("productCategorySub/get",[]),t.$toast.warning("กำลังโหลดข้อมูล..."),e.next=5,t.$store.dispatch("productCategorySub/get");case 5:return e.next=7,t.$store.dispatch("productCategory/getUseOnly");case 7:t.$toast.success("โหลดข้อมูลเสร็จสิ้น"),t.overlay=!1;case 9:case"end":return e.stop()}}),e)})))()},clickExit:function(){var t=this;return y(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("productCategory/get");case 2:t.dialog=!1;case 3:case"end":return e.stop()}}),e)})))()}}};function $(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}var P={components:{addProductCategory:c,getProductCategory:m,mainProductCategorySub:Object(i.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"",fullscreen:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"},on:{click:t.reload}},r),[t._v("\n                กลุ่มสินค้าย่อย\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[a("v-icon",{attrs:{left:"",color:"success"},on:{click:t.reload}},[t._v("refresh")]),t._v("จัดการกลุ่มสินค้าย่อย\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{text:"",color:"error"},on:{click:t.clickExit}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("addProductCategorySub"),t._v(" "),a("getProductCategorySub")],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!1,dialog:!1}},methods:{reload:function(){var t,e=this;return(t=o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.overlay=!0,e.$store.commit("productCategory/get",[]),e.$toast.warning("กำลังโหลดข้อมูล..."),t.next=5,e.$store.dispatch("productCategory/get");case 5:e.$toast.success("โหลดข้อมูลเสร็จสิ้น"),e.overlay=!1;case 7:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){$(n,r,o,s,i,"next",t)}function i(t){$(n,r,o,s,i,"throw",t)}s(void 0)}))})()}}},C=Object(i.a)(P,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"",fullscreen:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"},on:{click:t.reload}},r),[t._v("\n                กลุ่มสินค้า\n            ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[a("v-icon",{attrs:{left:"",color:"success"},on:{click:t.reload}},[t._v("refresh")]),t._v("จัดการกลุ่มสินค้าใหญ่\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{text:"",color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-row",[a("addProductCategory",{staticClass:"mr-2"}),t._v(" "),a("mainProductCategorySub")],1),t._v(" "),a("getProductCategory")],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function S(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function I(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){S(n,r,o,s,i,"next",t)}function i(t){S(n,r,o,s,i,"throw",t)}s(void 0)}))}}var O={data:function(){return{overlay:!1,dialog:!1,loading:!1,file:{},image:"",imagePreview:"",loadUploadImage:!1,form:{name:"",price_normal:"",price_special_status:!0,price_special:"",status:"1",image_status:!0,product_image_id:"1",product_show:1},formDefault:{name:"",price_normal:"",price_special_status:!0,price_special:"",status:"1",image_status:!0,product_image_id:"1",product_show:1},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}],price_normal:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],price_special:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],image:[function(t){return!!t||"ห้ามเว้นว่าง"}]}}},methods:{changeImage:function(){this.image=event.target.files[0]},clickUploadImage:function(){var t=this;return I(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadUploadImage=!0,t.overlay=!0,(a=new FormData).append("image",t.image),e.next=6,t.$store.dispatch("productImage/store",a);case 6:200==(r=e.sent).status?(t.imagePreview="https://drive.google.com/thumbnail?id="+r.data.src_name,t.$toast.success("อัปโหลดรูปสำเร็จ"),t.form.product_image_id=r.data.id,t.loadUploadImage=!1,t.overlay=!1):(t.$toast.error("อัปโหลดรูปไม่สำเร็จ เกิดข้อผิดพลาดบางอย่าง"),t.loadUploadImage=!1,t.overlay=!1);case 8:case"end":return e.stop()}}),e)})))()},clickRemoveImage:function(){var t=this;return I(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productImage/destroy",t.form.product_image_id);case 3:200===e.sent.status?(t.imagePreview="",t.$toast.success("ลบรูปภาพสำเร็จ"),t.form.product_image_id="1",t.overlay=!1):(t.snackbarError(),t.overlay=!1);case 5:case"end":return e.stop()}}),e)})))()},changePriceSpecialStatus:function(t){!1===t&&""===this.form.price_special&&(this.form.price_normal>0?this.form.price_special=this.form.price_normal:this.form.price_special="999.99")},changeImageStatus:function(t){!1===t&&""===this.file?this.file="image.jpg":!0===t&&"image.jpg"===this.file&&(this.file="")},snackbarError:function(){this.$toast.error("เกิดข้อผิดพลาดบางอย่าง ลองอีกครั้งภายหลัง")},save:function(){var t=this;return I(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=9;break}return t.loading=!0,t.overlay=!0,e.next=5,t.$store.dispatch("product/add",t.form);case 5:200===e.sent.status&&(t.loading=!1,t.form=t.formDefault,t.image="",t.imagePreview="",t.file="",t.$toast.success("เพิ่มสินค้าใหม่สำเร็จ"),t.dialog=!1,t.overlay=!1),e.next=11;break;case 9:t.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง"),t.overlay=!1;case 11:case"end":return e.stop()}}),e)})))()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.form.name=""}}},z=Object(i.a)(O,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"}},r),[t._v("เพิ่มสินค้าใหม่")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("เพิ่มสินค้าใหม่\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"ชื่อสินค้า",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-switch",{attrs:{inset:"",label:"สถานะการใช้งาน"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-switch",{attrs:{inset:"",label:"แสดงสินค้าบนหน้าเว็ปไซต์"},model:{value:t.form.product_show,callback:function(e){t.$set(t.form,"product_show",e)},expression:"form.product_show"}})],1)],1),t._v(" "),a("v-text-field",{attrs:{label:"ราคาปกติ",counter:"10",type:"number",pattern:"\\d*",suffix:"บาท",rules:t.Rules.price_normal},model:{value:t.form.price_normal,callback:function(e){t.$set(t.form,"price_normal",e)},expression:"form.price_normal"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"ราคาพิเศษ"},on:{change:t.changePriceSpecialStatus},model:{value:t.form.price_special_status,callback:function(e){t.$set(t.form,"price_special_status",e)},expression:"form.price_special_status"}}),t._v(" "),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!0===t.form.price_special_status,expression:"form.price_special_status === true"}],attrs:{label:"ราคาพิเศษ",counter:"10",type:"number",pattern:"\\d*",suffix:"บาท",rules:t.Rules.price_special},model:{value:t.form.price_special,callback:function(e){t.$set(t.form,"price_special",e)},expression:"form.price_special"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"อัปโหลดรูป"},on:{change:t.changeImageStatus},model:{value:t.form.image_status,callback:function(e){t.$set(t.form,"image_status",e)},expression:"form.image_status"}}),t._v(" "),a("v-file-input",{directives:[{name:"show",rawName:"v-show",value:!0===t.form.image_status&&!t.imagePreview,expression:"form.image_status === true && !imagePreview"}],attrs:{label:"อัปโหลดรูป",rules:t.Rules.image,"prepend-icon":"image",accept:"image/*"},on:{change:t.changeImage},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:1==t.form.image_status&&!t.imagePreview,expression:"form.image_status == true && !imagePreview"}],attrs:{color:"info",loading:t.loadUploadImage},on:{click:t.clickUploadImage}},[a("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("\n                        อัปโหลดรูปภาพ\n                    ")],1),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.imagePreview,expression:"imagePreview"}],attrs:{color:"error",loading:t.loadUploadImage},on:{click:t.clickRemoveImage}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                        ลบรูปภาพ\n                    ")],1),t._v(" "),a("v-row",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:!0===t.form.image_status&&t.imagePreview,expression:"\n                                form.image_status === true && imagePreview\n                            "}],attrs:{cols:"12",md:"6"}},[a("v-card",[a("v-img",{attrs:{src:t.imagePreview}})],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    สร้างสินค้าใหม่\n                ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n                    ล้างข้อมูล\n                ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function U(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function R(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){U(n,r,o,s,i,"next",t)}function i(t){U(n,r,o,s,i,"throw",t)}s(void 0)}))}}var T={data:function(){return{overlay:!1,dialog:!1,loading:!1,file:{},image:"",imagePreview:"",loadUploadImage:!1,mdText:12,uploadTemplate:!1,form:{name:"",price_normal:"",price_special_status:!0,price_special:"",status:"1",image_status:!1,product_image_id:"1",product_show:1},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}],price_normal:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],price_special:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],image:[function(t){return!!t||"ห้ามเว้นว่าง"}]}}},methods:{changeImage:function(){this.image=event.target.files[0]},clickUploadImage:function(){var t=this;return R(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadUploadImage=!0,t.overlay=!0,(a=new FormData).append("image",t.image),console.log(a),e.next=7,t.$store.dispatch("productImage/store",a);case 7:200==(r=e.sent).status?(t.imagePreview="https://drive.google.com/thumbnail?id="+r.data.src_name,t.$toast.success("อัปโหลดรูปสำเร็จ"),t.form.product_image_id=r.data.id,t.loadUploadImage=!1,t.overlay=!1):(t.$toast.error("อัปโหลดรูปไม่สำเร็จ เกิดข้อผิดพลาดบางอย่าง"),t.loadUploadImage=!1,t.overlay=!1);case 9:case"end":return e.stop()}}),e)})))()},clickRemoveImage:function(){var t=this;return R(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productImage/destroy",t.form.product_image_id);case 3:200===e.sent.status?(t.imagePreview="",t.$toast.success("ลบรูปภาพสำเร็จ"),t.form.product_image_id="1",t.overlay=!1):(t.snackbarError(),t.overlay=!1);case 5:case"end":return e.stop()}}),e)})))()},changePriceSpecialStatus:function(t){!1===t&&""===this.form.price_special&&(this.form.price_normal>0?this.form.price_special=this.form.price_normal:this.form.price_special="999.99")},changeImageStatus:function(t){this.mdText=1==t?7:12,this.uploadTemplate=!this.uploadTemplate,!1===t&&""===this.file?this.file="image.jpg":!0===t&&"image.jpg"===this.file&&(this.file="")},snackbarError:function(){this.$toast.error("เกิดข้อผิดพลาดบางอย่าง ลองอีกครั้งภายหลัง")},save:function(){var t=this;return R(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.form.validate()){e.next=9;break}return t.loading=!0,t.overlay=!0,e.next=5,t.$store.dispatch("product/add_v2",t.form);case 5:200===e.sent.status&&(t.loading=!1,t.image="",t.imagePreview="",t.file="",t.$toast.success("เพิ่มสินค้าใหม่สำเร็จ"),t.dialog=!1,t.start(),t.overlay=!1),e.next=11;break;case 9:t.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง"),t.overlay=!1;case 11:case"end":return e.stop()}}),e)})))()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.start()},start:function(){this.mdText=12,this.uploadTemplate=!1,this.form.name="",this.form.price_normal="",this.form.price_special_status=!1,this.form.price_special="0",this.form.status="1",this.form.image_status=!1,this.form.product_image_id="1",this.form.product_show=1}}},E=Object(i.a)(T,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info"}},r),[t._v("เพิ่มสินค้าใหม่ V2")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("เพิ่มสินค้าใหม่ V2")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1,t.start()}}},[t._v("close")])],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-text",{staticClass:"pb-0"},[a("v-form",{ref:"form",attrs:{"lazy-validation":""}},[a("v-row",[a("v-col",{staticClass:"pb-0",attrs:{cols:"12",md:t.mdText}},[a("v-text-field",{attrs:{rules:t.Rules.name,label:"ชื่อสินค้า",outlined:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-text-field",{attrs:{label:"ราคาปกติ",type:"number",pattern:"\\d*",suffix:"บาท",rules:t.Rules.price_normal,outlined:""},model:{value:t.form.price_normal,callback:function(e){t.$set(t.form,"price_normal",e)},expression:"form.price_normal"}}),t._v(" "),a("v-switch",{staticClass:"mt-0",attrs:{inset:"",label:"สถานะการใช้งาน"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),t._v(" "),a("v-switch",{staticClass:"mt-0",attrs:{inset:"",label:"แสดงสินค้าบนหน้าเว็ปไซต์"},model:{value:t.form.product_show,callback:function(e){t.$set(t.form,"product_show",e)},expression:"form.product_show"}}),t._v(" "),a("v-switch",{staticClass:"mt-0",attrs:{inset:"",label:"อัปโหลดรูป"},on:{change:function(e){return t.changeImageStatus(t.form.image_status)}},model:{value:t.form.image_status,callback:function(e){t.$set(t.form,"image_status",e)},expression:"form.image_status"}})],1),t._v(" "),a("v-col",{directives:[{name:"show",rawName:"v-show",value:t.uploadTemplate,expression:"uploadTemplate"}],staticClass:"mb-8",attrs:{cols:"12",md:"5"}},[a("v-file-input",{directives:[{name:"show",rawName:"v-show",value:!0===t.form.image_status&&!t.imagePreview,expression:"\n                                    form.image_status === true &&\n                                        !imagePreview\n                                "}],attrs:{label:"อัปโหลดรูป",rules:t.Rules.image,"prepend-icon":"image",accept:"image/*"},on:{change:t.changeImage},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:1==t.form.image_status&&!t.imagePreview,expression:"\n                                    form.image_status == true &&\n                                        !imagePreview\n                                "}],attrs:{color:"info",loading:t.loadUploadImage,block:""},on:{click:t.clickUploadImage}},[a("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("\n                                อัปโหลดรูปภาพ\n                            ")],1),t._v(" "),a("v-row",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:!0===t.form.image_status&&t.imagePreview,expression:"\n                                        form.image_status === true &&\n                                            imagePreview\n                                    "}],attrs:{cols:"12",md:"12"}},[a("v-card",[a("v-img",{attrs:{src:t.imagePreview}},[a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.imagePreview,expression:"imagePreview"}],staticClass:"mt-1 ml-1",attrs:{color:"error",loading:t.loadUploadImage,fab:"",small:""},on:{click:t.clickRemoveImage}},[a("v-icon",[t._v("delete")])],1)],1)],1)],1)],1)],1)],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-container",{staticClass:"text-right pa-0"},[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                        สร้างสินค้าใหม่\n                    ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n                        ล้างข้อมูล\n                    ")],1)],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function j(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function N(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){j(n,r,o,s,i,"next",t)}function i(t){j(n,r,o,s,i,"throw",t)}s(void 0)}))}}var D={props:["data"],data:function(){return{overlay:!1,dialog:!1,loading:!1,file:{},image:"",imagePreview:this.data.product_image.src_name,loadUploadImage:!1,form:this.data,formDefault:{name:"",price_normal:"",price_special_status:!0,price_special:"",status:"1",image_status:!0,product_image_id:"1",product_show:1},Rules:{name:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return t.length<=100||"ไม่เกิน 100 ตัวอักษร"}],price_normal:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return 0>t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],price_special:[function(t){return!!t||"ห้ามเว้นว่าง"},function(t){return 0>t.length<=10||"ไม่เกิน 10 ตัวอักษร"}],image:[function(t){return!!t||"ห้ามเว้นว่าง"}]}}},methods:{changeImage:function(){this.image=event.target.files[0]},clickUploadImage:function(){var t=this;return N(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadUploadImage=!0,t.overlay=!0,(a=new FormData).append("image",t.image),e.next=6,t.$store.dispatch("productImage/update",{id:t.data.id,formData:a});case 6:200==(r=e.sent).status?(t.imagePreview=r.data.src_name,t.$toast.success("อัปโหลดรูปสำเร็จ"),t.form.product_image_id=r.data.id,t.loadUploadImage=!1,t.overlay=!1):(t.$toast.error("อัปโหลดรูปไม่สำเร็จ เกิดข้อผิดพลาดบางอย่าง"),t.loadUploadImage=!1,t.overlay=!1);case 8:case"end":return e.stop()}}),e)})))()},clickRemoveImage:function(){var t=this;return N(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productImage/destroy",t.form.product_image_id);case 3:200==e.sent.status?(t.imagePreview="",t.$toast.success("ลบรูปภาพสำเร็จ"),t.form.product_image_id="1",t.overlay=!1):(t.snackbarError(),t.overlay=!1);case 5:case"end":return e.stop()}}),e)})))()},changePriceSpecialStatus:function(t){!1===t&&""===this.form.price_special&&(this.form.price_normal>0?this.form.price_special=this.form.price_normal:this.form.price_special="999.99")},changeImageStatus:function(t){0==t&&""==this.file?this.file="image.jpg":1==t&&"image.jpg"==this.file&&(this.file="")},snackbarError:function(){this.$toast.error("เกิดข้อผิดพลาดบางอย่าง ลองอีกครั้งภายหลัง")},save:function(){var t=this;return N(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.formUpdate.validate()){e.next=9;break}return t.loading=!0,t.overlay=!0,e.next=5,t.$store.dispatch("product/update",t.form);case 5:200==e.sent.status&&(t.loading=!1,t.$toast.success("เพิ่มสินค้าใหม่สำเร็จ"),t.dialog=!1,t.overlay=!1),e.next=11;break;case 9:t.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง"),t.overlay=!1;case 11:case"end":return e.stop()}}),e)})))()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.form.name=""}}},A=Object(i.a)(D,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:"",transition:"dialog-bottom-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"warning",fab:"","x-small":""}},r),[a("v-icon",[t._v("edit")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("แก้ไขสินค้า\n                "),a("v-spacer"),t._v(" "),a("v-icon",{attrs:{color:"error"},on:{click:function(e){t.dialog=!1}}},[t._v("close")])],1),t._v(" "),a("v-card-text",[a("v-form",{ref:"formUpdate",attrs:{"lazy-validation":""}},[a("v-text-field",{attrs:{label:"ชื่อสินค้า",counter:"100",rules:t.Rules.name},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-switch",{attrs:{inset:"",label:"สถานะการใช้งาน"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-switch",{attrs:{inset:"",label:"แสดงสินค้าบนหน้าเว็ปไซต์"},model:{value:t.form.product_show,callback:function(e){t.$set(t.form,"product_show",e)},expression:"form.product_show"}})],1)],1),t._v(" "),a("v-text-field",{attrs:{label:"ราคาปกติ",counter:"10",type:"number",pattern:"\\d*",suffix:"บาท",rules:t.Rules.price_normal},model:{value:t.form.price_normal,callback:function(e){t.$set(t.form,"price_normal",e)},expression:"form.price_normal"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"ราคาพิเศษ"},on:{change:t.changePriceSpecialStatus},model:{value:t.form.price_special_status,callback:function(e){t.$set(t.form,"price_special_status",e)},expression:"form.price_special_status"}}),t._v(" "),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:1==t.form.price_special_status,expression:"form.price_special_status == true"}],attrs:{label:"ราคาพิเศษ",counter:"10",type:"number",pattern:"\\d*",suffix:"บาท",rules:t.Rules.price_special},model:{value:t.form.price_special,callback:function(e){t.$set(t.form,"price_special",e)},expression:"form.price_special"}}),t._v(" "),a("v-switch",{attrs:{inset:"",label:"อัปโหลดรูป"},on:{change:t.changeImageStatus},model:{value:t.form.image_status,callback:function(e){t.$set(t.form,"image_status",e)},expression:"form.image_status"}}),t._v(" "),a("v-file-input",{directives:[{name:"show",rawName:"v-show",value:1==t.form.image_status&&!t.imagePreview,expression:"form.image_status == true && !imagePreview"}],attrs:{label:"อัปโหลดรูป","prepend-icon":"image",accept:"image/*"},on:{change:t.changeImage},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}}),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:1==t.form.image_status&&!t.imagePreview,expression:"form.image_status == true && !imagePreview"}],attrs:{color:"info",loading:t.loadUploadImage},on:{click:t.clickUploadImage}},[a("v-icon",{attrs:{left:""}},[t._v("cloud_upload")]),t._v("\n                        อัปโหลดรูปภาพ\n                    ")],1),t._v(" "),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.imagePreview&&1==t.form.image_status,expression:"imagePreview && form.image_status == true"}],attrs:{color:"error",loading:t.loadUploadImage},on:{click:t.clickRemoveImage}},[a("v-icon",{attrs:{left:""}},[t._v("delete")]),t._v("\n                        ลบรูปภาพ\n                    ")],1),t._v(" "),a("v-row",[a("v-col",{directives:[{name:"show",rawName:"v-show",value:1==t.form.image_status&&t.imagePreview,expression:"\n                                form.image_status == true && imagePreview\n                            "}],attrs:{cols:"12",md:"6"}},[a("v-card",[a("v-img",{attrs:{src:"https://drive.google.com/thumbnail?id="+t.imagePreview}})],1)],1)],1)],1)],1),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"success",loading:t.loading},on:{click:t.save}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                    แก้ไขข้อมูลสินค้า\n                ")],1),t._v(" "),a("v-btn",{attrs:{color:"error"},on:{click:t.reset}},[a("v-icon",{attrs:{left:""}},[t._v("clear")]),t._v("\n                    ล้างข้อมูล\n                ")],1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports;function M(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function V(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){M(n,r,o,s,i,"next",t)}function i(t){M(n,r,o,s,i,"throw",t)}s(void 0)}))}}var F={data:function(){return{asjdl:"",overlay:!1,dialog:!1,form:{product_id:this.data.id,product_category_sub_id:[]},items:[]}},props:["data"],methods:{snackbarError:function(){this.$toast.error("เกิดข้อผิดพลาดบางอย่าง ลองอีกครั้งภายหลัง")},save:function(){var t=this;return V(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productTag/store",t.form);case 3:t.dialog=!1,t.overlay=!1;case 5:case"end":return e.stop()}}),e)})))()},reload:function(){var t=this;return V(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productCategorySub/getUseOnly");case 3:return t.items=t.$store.getters["productCategorySub/dataUseOnly"],e.next=6,t.$store.dispatch("productTag/isProductTags",t.form.product_id);case 6:t.form.product_category_sub_id=t.$store.getters["productTag/isProductTags"],t.overlay=!1;case 8:case"end":return e.stop()}}),e)})))()}}};function B(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function G(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){B(n,r,o,s,i,"next",t)}function i(t){B(n,r,o,s,i,"throw",t)}s(void 0)}))}}var J={components:{ProductTagAdd:Object(i.a)(F,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"info",fab:"","x-small":""},on:{click:t.reload}},r),[a("v-icon",[t._v("add")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("\n                เพิ่มแท็กสินค้า\n                "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"success",fab:"","x-small":""},on:{click:t.save}},[a("v-icon",[t._v("save")])],1)],1),t._v(" "),a("v-card-text",[a("v-chip-group",{attrs:{column:"",multiple:""},model:{value:t.form.product_category_sub_id,callback:function(e){t.$set(t.form,"product_category_sub_id",e)},expression:"form.product_category_sub_id"}},t._l(t.items,(function(e){return a("v-chip",{key:e.id,attrs:{filter:"",value:e.id}},[t._v("\n                        "+t._s(e.product_category.name)+" - "+t._s(e.name)+"\n                    ")])})),1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{test:{},overlay:!1,dialog:!1,form:{product_id:this.data.id,product_category_sub_id:""},product_tag:[]}},props:["data"],methods:{snackbarError:function(){this.$toast.error("เกิดข้อผิดพลาดบางอย่าง ลองอีกครั้งภายหลัง")},reload:function(){var t=this;return G(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.overlay=!0,e.next=3,t.$store.dispatch("productTag/get",t.form.product_id);case 3:t.overlay=!1;case 4:case"end":return e.stop()}}),e)})))()},clickProductCategorySub:function(t){var e=this;return G(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=10;break}return e.overlay=!0,e.loading=!0,e.form.product_category_sub_id=t,a.next=6,e.$store.dispatch("productTag/store",e.form);case 6:200===a.sent.status&&(e.loading=!1,e.$toast.success("เพิ่มสินค้าใหม่สำเร็จ"),e.overlay=!1),a.next=12;break;case 10:e.$toast.warning("คุณอาจกรอกไม่ครบหรือไม่ถูกต้อง"),e.overlay=!1;case 12:case"end":return a.stop()}}),a)})))()},reset:function(){this.$toast.success("ล้างข้อมูลสำเร็จ"),this.form.name=""}}};function q(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){q(n,r,o,s,i,"next",t)}function i(t){q(n,r,o,s,i,"throw",t)}s(void 0)}))}}var K={props:["data"],data:function(){return{dialog:!1,items1:[],items2:[],op1:null,op2:null,subs1:[],subs2:[],complete:1,form:{product_id:null,subs1:null,op1:null,subs2:null,product_category_id:null,status:null},Rules:{op1:[function(t){return!!t||"ห้ามเว้นว่าง"}],op2:[function(t){return!!t||"ห้ามเว้นว่าง"}],subs1:[function(t){return!!t||"ห้ามเว้นว่าง"}],subs2:[function(t){return!!t||"ห้ามเว้นว่าง"}]}}},methods:{count:function(){this.complete+=1},start:function(){var t=this;return H(o.a.mark((function e(){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.reset(),e.next=3,t.$store.dispatch("optionMain/productCheck",t.data.id);case 3:return a=e.sent,e.next=6,t.$store.dispatch("productCategory/getUseOnly");case 6:r=e.sent,0==a.data?(t.items1=[{id:t.data.id,name:t.data.name}],t.op1=t.data.id,t.subs1=[{id:t.data.id,name:t.data.name}],t.form.subs1=t.data.id):t.items1=r.data,t.items2=r.data,t.form.product_id=t.data.id;case 10:case"end":return e.stop()}}),e)})))()},clickProduct:function(){var t=this;return H(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.items1=[{id:t.data.id,name:t.data.name}],t.op1=t.data.id,t.subs1=[{id:t.data.id,name:t.data.name}],t.form.subs1=t.data.id,t.form.product_id=t.data.id;case 5:case"end":return e.stop()}}),e)})))()},reset:function(){this.form={product_id:null,op1:null,op2:null},this.op1=null,this.op2=null,this.subs1=[],this.subs2=[]},SaveOP12:function(){var t=this;return H(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$refs.formOP12.validate()){e.next=5;break}return e.next=3,t.$store.dispatch("optionMain/store",t.form);case 3:200===e.sent.status&&(t.$toast.success("ทำรายการสำเร็จ"),t.start(),t.reset());case 5:case"end":return e.stop()}}),e)})))()},changeOp1:function(){var t=this;return H(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.op2!=t.op1){e.next=6;break}return t.op1=null,t.form.subs1=null,t.op2=null,t.form.subs2=null,e.abrupt("return");case 6:return e.next=8,t.$store.dispatch("productCategory/getSubByID",t.op1);case 8:a=e.sent,t.subs1=a.data,t.form.subs1=null;case 11:case"end":return e.stop()}}),e)})))()},formSubs1:function(){var t=this;return H(o.a.mark((function e(){var a,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={subs1:t.form.subs1,product_id:t.data.id},e.next=3,t.$store.dispatch("optionMain/check",a);case 3:if(0!=(r=e.sent).data.status){e.next=8;break}return t.form.subs1=null,t.$toast.error("โปรดเลือกใหม่"),e.abrupt("return");case 8:for(t.form.subs2=[],n=0;n<r.data.data.sub.length;n++)t.form.subs2[n]=r.data.data.sub[n].op2;t.op2=r.data.data.product_category_id,t.form.op1=r.data.data.id,t.changeOp2();case 13:case"end":return e.stop()}}),e)})))()},changeOp2:function(){var t=this;return H(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.op2!=t.op1){e.next=5;break}return t.$toast.warning("ตัวเลือกหลัก ห้ามซ้ำกัน"),t.op2=null,t.form.subs2=null,e.abrupt("return");case 5:return t.form.product_category_id=t.op2,e.next=8,t.$store.dispatch("productCategory/getSubByID",t.op2);case 8:a=e.sent,t.subs2=a.data;case 10:case"end":return e.stop()}}),e)})))()}},watch:{}};function L(t,e,a,r,o,n,s){try{var i=t[n](s),c=i.value}catch(t){return void a(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function Q(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var n=t.apply(e,a);function s(t){L(n,r,o,s,i,"next",t)}function i(t){L(n,r,o,s,i,"throw",t)}s(void 0)}))}}var W={props:["selectProduct"],components:{ProductUpdate:A,ProductTagMain:Object(i.a)(J,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"600",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{color:"blue-grey",fab:"","x-small":""},on:{click:t.reload}},r),[a("v-icon",{attrs:{color:"white"}},[t._v("flag")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[a("v-icon",[t._v("flag")]),t._v("\n                "+t._s(t.data.name)+"\n                "),a("v-spacer"),t._v(" "),a("ProductTagAdd",{staticClass:"mr-2",attrs:{data:t.data}}),t._v(" "),a("v-btn",{attrs:{color:"error",fab:"","x-small":""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("close")])],1)],1),t._v(" "),a("v-card-text",[a("v-chip-group",{attrs:{column:""}},t._l(this.$store.getters["productTag/data"],(function(e){return a("v-chip",{key:e.id},[t._v(t._s(e.product_category_sub.product_category.name)+"\n                        - "+t._s(e.product_category_sub.name)+"\n                    ")])})),1)],1)],1),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)],1)}),[],!1,null,null,null).exports,TagOptionMain:Object(i.a)(K,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{persistent:"","max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{fab:"","x-small":"",color:"error"},on:{click:function(e){return t.start()}}},r),[a("v-icon",[t._v("edit")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",{staticClass:"pb-0"},[a("h3",{on:{click:t.clickProduct}},[t._v("ชื่อสินค้า : "+t._s(t.data.name))]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"success--text",attrs:{fab:"","x-small":""},on:{click:function(e){return t.start()}}},[a("v-icon",[t._v("refresh")])],1),t._v(" "),a("v-btn",{staticClass:"red--text",attrs:{fab:"","x-small":""},on:{click:function(e){t.reset(),t.dialog=!1}}},[a("v-icon",[t._v("close")])],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-form",{ref:"formOP12",attrs:{"lazy-validation":""}},[a("v-card-text",[a("v-autocomplete",{attrs:{items:t.items1,"item-text":"name","item-value":"id",label:"ตัวเลือกหลัก",outlined:"",rules:t.Rules.op1},on:{change:t.changeOp1},model:{value:t.op1,callback:function(e){t.op1=e},expression:"op1"}}),t._v(" "),a("v-select",{attrs:{outlined:"",items:t.subs1,"item-text":"name","item-value":"id",label:"ตัวเลือกหลัก (ย่อย)",rules:t.Rules.subs1},on:{change:t.formSubs1},model:{value:t.form.subs1,callback:function(e){t.$set(t.form,"subs1",e)},expression:"form.subs1"}}),t._v(" "),t.op1&&t.form.subs1?a("div",[a("v-divider",{staticClass:"mt-0"}),t._v(" "),a("h4",{staticClass:"mb-4"},[t._v("เชื่อมต่อกับ")]),t._v(" "),a("v-autocomplete",{attrs:{items:t.items2,"item-text":"name","item-value":"id",label:"ตัวเลือกหลัก",outlined:"",rules:t.Rules.op2},on:{change:t.changeOp2},model:{value:t.op2,callback:function(e){t.op2=e},expression:"op2"}}),t._v(" "),t.op2&&t.op1!=t.op2?a("v-select",{attrs:{multiple:"",outlined:"","small-chips":"","item-value":"id","item-text":"name",label:"ตัวเลือกหลัก (ย่อย)",items:t.subs2,rules:t.Rules.subs2},model:{value:t.form.subs2,callback:function(e){t.$set(t.form,"subs2",e)},expression:"form.subs2"}}):t._e()],1):t._e(),t._v(" "),a("v-btn",{attrs:{color:"success"},on:{click:t.SaveOP12}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                        ยืนยัน OP\n                    ")],1),t._v(" "),a("v-btn",{attrs:{color:"success"}},[a("v-icon",{attrs:{left:""}},[t._v("save")]),t._v("\n                        ยืนยัน PO\n                    ")],1)],1)],1)],1),t._v(" "),t._v("\n\n        "+t._s(t.op2)+"\n    ")],1)],1)}),[],!1,null,null,null).exports},data:function(){return{overlay:!0,search:"",loadingTable:!0,headers:[{text:"รูปสินค้า",value:"product_image_id"},{text:"ชื่อสินค้า",value:"name"},{text:"ราคาปกติ/ราคาพิเศษ",value:"price_normal"},{text:"สถานะ",value:"status"},{text:"การจัดการ",value:"action"}]}},methods:{changeStatus:function(t){var e=this;return Q(o.a.mark((function a(){var r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.overlay=!0,r={id:t.id,status:t.status},a.next=4,e.$store.dispatch("product/update",r);case 4:200==a.sent.status?(e.$toast.success("เปลี่ยนแปลงสถานะเรียบร้อย"),e.overlay=!1):(e.$toast.error("เกิดข้อผิดพลาดบางอย่าง กรุณาลองใหม่ภายหลัง"),e.overlay=!1);case 6:case"end":return a.stop()}}),a)})))()}},beforeCreate:function(){var t=this;return Q(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("product/get");case 2:t.loadingTable=!1,t.overlay=!1;case 4:case"end":return e.stop()}}),e)})))()}},X={components:{MainProductCategory:C,ProductAdd:z,ProductGet:Object(i.a)(W,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-text-field",{attrs:{label:"ค้นหา","append-icon":"search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("v-data-table",{attrs:{headers:t.headers,items:this.$store.getters["product/data"],loading:t.loadingTable,search:t.search,"items-per-page":10,"no-results-text":"ไม่พบข้อมูลที่ค้นหา","loading-text":"รอสักครู่...กำลังโหลดข้อมูล","item-key":"id"},scopedSlots:t._u([{key:"item.status",fn:function(e){var r=e.item;return[a("v-switch",{attrs:{inset:""},on:{change:function(e){return t.changeStatus(r)}},model:{value:r.status,callback:function(e){t.$set(r,"status",e)},expression:"item.status"}})]}},{key:"item.price_normal",fn:function(e){var r=e.item;return[a("v-row",[1==r.price_special_status?a("v-col",[a("p",[a("S",{staticClass:"red--text"},[t._v(t._s(r.price_normal))]),t._v(" /\n                        "+t._s(r.price_special)+"\n                    ")],1)]):a("v-col",[a("p",[t._v("\n                        "+t._s(r.price_normal)+" /\n                        "),a("S",{staticClass:"red--text"},[t._v("ไม่มี")])],1)])],1)]}},{key:"item.product_image_id",fn:function(t){var e=t.item;return[a("v-img",{directives:[{name:"show",rawName:"v-show",value:1==e.image_status,expression:"item.image_status == true"}],attrs:{width:"100",src:"https://drive.google.com/thumbnail?id="+e.product_image.src_name}})]}},{key:"item.action",fn:function(e){var r=e.item;return[a("v-container",[a("v-row",[a("ProductUpdate",{staticClass:"mr-2",attrs:{data:r}}),t._v(" "),a("ProductTagMain",{staticClass:"mr-2",attrs:{data:r}}),t._v(" "),a("TagOptionMain",{attrs:{data:r}})],1)],1)]}}])}),t._v(" "),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{indeterminate:"",size:this.$store.getters["main/sizeOverlay"]}})],1)],1)}),[],!1,null,null,null).exports,ProductAddV2:E},data:function(){return{actionAdd:"actionAdd",formDefault:{name:"",price_normal:"",price_special_status:!0,price_special:"",status:"1",image_status:!0,product_image_id:"1",product_image:{src_name:""}}}}},Y=Object(i.a)(X,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h4",[this._v("สินค้า")]),this._v(" "),e("v-container",[e("v-row",[e("MainProductCategory",{staticClass:"mr-2"}),this._v(" "),e("ProductAdd",{staticClass:"mr-2",attrs:{action:this.actionAdd,data:this.formDefault}}),this._v(" "),e("ProductAddV2")],1)],1),this._v(" "),e("ProductGet")],1)}),[],!1,null,null,null);e.default=Y.exports}}]);